window.lsWire=window.lsWire||{},function(){Function.prototype.getMLS=function(e){var t=this.toString().replace(/^[^\/]+\/\*!?/,"").replace(/\*\/[^\/]+$/,"");return e&&(t=t.replace(/[\n\t\r]/g,"")),t.trim()},window.lsWire={eventObjects:[],keyboardShortcuts:{},webApiPath:void 0,version:"1.0.6",initializeCore:function(e,t,n){if(void 0==lsWire.webApiPath&&(lsWire.webApiPath=$.mobile.path.documentUrl.directory+"../api/"),lsWire.initializeShell(e),lsWire.initializeScreenSignals(e),window.toastr&&(toastr.options.positionClass="toast-bottom-left"),!lsWire.hasBeenInitialized){if(window.document.body.classList.add("msls-collapsed"),$(window).on("error",function(e){msls.showMessageBox("There was a fatal error: "+e.originalEvent.message,{title:"Big Error!"})}),$(document).ajaxError(function(e,t){401===t.status&&location.reload()}),t===!1)return void lsWire.noDirectLinking();lsWire.initializeBackCommand(),lsWire.initializeCancelCommand(),lsWire.initializeCloseCommand(),lsWire.initializeDiscardCommand(),lsWire.initializeHomeCommand(),lsWire.initializeLogoutCommand(),lsWire.initializeOkCommand(),lsWire.initializeSaveCommand(),lsWire.getUserInfo(),lsWire.getAppConfig(),lsWire.shell._homeScreen.id!=e.details._modelId&&(myapp.directLinked=!0)}lsWire.initializeTabCommand(),void 0!=n&&n(),lsWire.hasBeenInitialized=!0,window.document.body.classList.remove("msls-collapsed")},initializeScreenSignals:function(e){function t(e,t){var n=null,i=null;if(_.isObject(t))switch(e){case"to":void 0!=t.toPage&&_.isObject(t.toPage)&&t.toPage.length>0&&(n=t.toPage[0].id);break;case"prev":void 0!=t.prevPage&&_.isObject(t.prevPage)&&t.prevPage.length>0&&(n=t.prevPage[0].id);break;case"next":void 0!=t.nextPage&&_.isObject(t.nextPage)&&t.nextPage.length>0&&(n=t.nextPage[0].id);break;case"from":void 0!=t.options&&_.isObject(t.options)&&void 0!=t.options.fromPage&&t.options.fromPage.length>0&&(n=t.options.fromPage[0].id);break;case"first":n=lsWire.getShell().shellView._firstPageId;break;case"target":n=t.target.id;break;default:n=lsWire.getShell().activeNavigationUnit.screen.details._pageId}if(void 0!=n){var r=lsWire.getShell().shellView._pageIdMapping[n];void 0!=r&&void 0!=r.unit&&void 0!=r.unit.screen&&(i=r.unit.screen)}return i}var n=e.details._modelId,i=["afterCreated","beforeShown","afterShown","beforeHide","afterHide","beforeChange","afterChange"];e.on={},_.forEach(i,function(t){e[t]=function(){var i=myapp[n][t];i&&i(e)},e.on[t]=new signals,e.on[t].add(e[t])}),lsWire.signalsInitialized||(window.onbeforeunload=function(){},$(document.body).on("pagebeforechange",function(e,n){var i=t("from",n);i&&i.on&&i.on.beforeChange&&(i.on.beforeChange.active||(i.on.beforeChange.active=!0),i.on.beforeChange.dispatch())}),$(document.body).on("pagechange",function(e,n){var i=t("to",n);i&&i.on&&i.on.afterChange&&(i.on.afterChange.active||(i.on.afterChange.active=!0),i.on.afterChange.dispatch())}),$(document.body).on("pagebeforeshow",function(e,n){var i=t("target",e);void 0==i&&(i=t("first",n)),i&&i.on&&i.on.beforeShown&&(i.on.beforeShown.active||(i.on.beforeShown.active=!0),lsWire.screen=i,i.on.beforeShown.dispatch())}),$(document.body).on("pageshow",function(e,n){var i=t("target",e);void 0==i&&(i=t("first",n)),i&&i.on&&i.on.afterShown&&(i.on.afterShown.active||(i.on.afterShown.active=!0),i.on.afterShown.dispatch())}),$(document.body).on("pagebeforehide",function(e){var n=t("target",e);n&&n.on&&n.on.beforeHide&&(n.on.beforeHide.active||(n.on.beforeHide.active=!0),n.on.beforeHide.dispatch())}),$(document.body).on("pagehide",function(e){var n=t("target",e);n&&n.on&&n.on.afterHide&&n.on.afterHide.dispatch()}),$(document.body).on("pageremove",function(){}),$(document.body).on("pageinit",function(){}),$(document.body).on("pagebeforecreate",function(){}),$(document.body).on("pagecreate",function(e){var n=t("target",e);n&&n.on&&n.on.afterCreated&&(n.on.afterCreated.active||(n.on.afterCreated.active=!0),n.on.afterCreated.dispatch())}),$(document.body).on("updatelayout",function(){}),$(document.body).on("pageload",function(){}),lsWire.signalsInitialized=!0)},initializeAfterShown:function(){var e=lsWire.getShell();void 0!=e&&(e.onchange=function(t){"activeNavigationUnit"===t.detail&&"change"===t.type&&e.finishNavigation().then(function(){var t=e.activeNavigationUnit,n=myapp[t.screen.details._modelId].afterShown;void 0!=n&&(n(t.screen),$("#"+t.screen.details._pageId).focus())})})},initializeBeforeShown:function(){$(window).on("pagebeforechange",function(e,t){var n=lsWire.getShell(),i=null;if("object"==typeof t.toPage){i=t.toPage[0].id;var r=n.shellView._pageIdMapping[i];if(void 0!=r){var a=r.unit.screen,o=a.details._modelId,l=myapp[o].beforeShown;void 0!=l&&(myapp.directLinked&&lsWire.shell._homeScreen.id==o&&delete myapp.directLinked,l(a,t)),setTimeout(function(){var e=myapp[o].afterRendered;void 0!=e&&e(a,t)},0)}}})},initializeTabCommand:function(){var e=lsWire.getShell();void 0!=e&&e.finishNavigation().then(function(){var t=e.activeNavigationUnit,n=t.screen,i=t.task.tabCommands;_.forEach(i,function(i){i.command.___method=function(i,r){var a,o=myapp[n.details._modelId].beforeTabChange;if(_.isFunction(o)&&(a=o(n,t.pageName,i)),_.isBoolean(a)&&!a)return!1;void 0!=r&&void 0!=r.beforeShown||!_.isFunction(a)||(r={beforeShown:a(n,t.pageName,i)});var l=r?r.beforeShown:null;return e.showTab(i,null,l)}})})},initializeDiscardCommand:function(){var e=lsWire.getShell();void 0!=e&&(e.discardCommand.command.___method=function(){var t=e.activeNavigationUnit.screen,n=t.details._modelId,i="beforeSaveBoundary",r=myapp[n].beforeDiscard;if(void 0!=r){var a=r(t);return void 0!=a&&void 0!=a.done?a.done(function(t){return t?e.canCancelNestedChanges?e.cancelNestedChanges():e.discardChanges(i):!1}):void 0==a||a?e.canCancelNestedChanges?e.cancelNestedChanges():e.discardChanges(i):!1}return e.canCancelNestedChanges?e.cancelNestedChanges():e.discardChanges(i)})},initializeSaveCommand:function(){var e=lsWire.getShell();void 0!=e&&(e.saveCommand.command.___method=function(){var t=e.activeNavigationUnit.screen,n=t.details._modelId,i="beforeSaveBoundary",r=myapp[n].beforeSave;if(void 0!=r){var a=r(t);return void 0!=a&&void 0!=a.done?a.done(function(t){return t?e.canApplyNestedChanges?e.applyNestedChanges(i):e.saveChanges(i):e.cancelChanges()}):a!==!1?e.canApplyNestedChanges?e.applyNestedChanges(i):e.saveChanges(i):!1}return e.canApplyNestedChanges?e.applyNestedChanges(i):e.saveChanges(i)})},initializeBackCommand:function(){var e=lsWire.getShell();void 0!=e&&(e.backCommand.command.___method=function(t){var n=e.activeNavigationUnit.screen,i=n.details._modelId,r=myapp[i].beforeBack;if(void 0==r)return e.navigateBack(t);var a=r(n);if(void 0!=a&&void 0!=a.done)a.done(function(n){return n?e.navigateBack(t):void 0});else if(a!==!1)return e.navigateBack(t)})},initializeHomeCommand:function(){var e=lsWire.getShell();void 0!=e&&(e.homeCommand.command.___method=function(){var t=e.activeNavigationUnit.screen,n=t.details._modelId,i=myapp[n].beforeHome;if(void 0==i)return e.navigateHome();var r=i(t);if(void 0!=r&&void 0!=r.done)r.done(function(t){return t?e.navigateHome():void 0});else if(r!==!1)return e.navigateHome()})},initializeCloseCommand:function(){var e=lsWire.getShell();void 0!=e&&(e.closeCommand.command.___method=function(t){var n=e.activeNavigationUnit.screen,i=n.details._modelId,r=myapp[i].beforeClose;if(void 0!=r){var a=r(n);void 0!=a&&void 0!=a.done?a.done(function(n){n&&e.navigateBack(t)}):a!==!1&&e.navigateBack(t)}else e.navigateBack(t)})},initializeOkCommand:function(){var e=lsWire.getShell();void 0!=e&&(e.okCommand.command.___method=function(){var t=e.activeNavigationUnit.screen,n=t.details._modelId,i="beforeSaveBoundary",r=myapp[n].beforeOk;if(void 0!=r){var a=r(t);return void 0!=a&&void 0!=a.done?a.done(function(t){return t?e.canApplyNestedChanges?e.applyNestedChanges(i):e.saveChanges(i):e.cancelChanges()}):a!==!1?e.canApplyNestedChanges?e.applyNestedChanges(i):e.saveChanges(i):!1}return e.canApplyNestedChanges?e.applyNestedChanges(i):e.saveChanges(i)})},initializeCancelCommand:function(){var e=lsWire.getShell();void 0!=e&&(e.cancelCommand.command.___method=function(){var t=e.activeNavigationUnit.screen,n=t.details._modelId,i="beforeSaveBoundary",r=myapp[n].beforeCancel;if(void 0!=r){var a=r(t);return void 0!=a&&void 0!=a.done?a.done(function(t){return t?e.canCancelNestedChanges?e.cancelNestedChanges():e.discardChanges(i):!1}):void 0==a||a?e.canCancelNestedChanges?e.cancelNestedChanges():e.discardChanges(i):!1}return e.canCancelNestedChanges?e.cancelNestedChanges():e.discardChanges(i)})},initializeLogoutCommand:function(){var e=lsWire.getShell();void 0!=e&&e._isFormsAuthEnabled&&(e.logoutCommand.command.___method=function(){var t=e.activeNavigationUnit.screen,n=t.details._modelId,i=myapp[n].beforeLogout;if(void 0!=i){var r=i(t);void 0!=r&&void 0!=r.done?r.done(function(t){t&&e.shellView.logout()}):r!==!1&&e.shellView.logout()}else e.shellView.logout()})},initializeAfterClosed:function(){var e=lsWire.getShell();void 0!=e&&e.navigationInProgress&&e.finishNavigation().then(function(){var t=e.activeNavigationUnit.screen.details._modelId,n=myapp[t].afterClosed;if(void 0!=n){var i=e.activeNavigationUnit.afterClosed;e.activeNavigationUnit.afterClosed=function(e,t){n(e,t),i(e,t)}}})},initializeShell:function(e){if(void 0===lsWire.shell)if(void 0!==msls.shell)lsWire.shell=msls.shell;else{var t=e.details.startPage._dependents;if(void 0!==t){var n=t.isVisible;void 0!==n[0]&&(lsWire.shell=n[0].trackingStub.o.task.shell)}}return lsWire.shell},getShell:function(e){return lsWire.initializeShell(e)},activateAllPages:function(e){if(void 0!=e)for(var t=e.details.pages,n=0;n<t.length;n++)void 0===t[n]._isActivated&&t[n]._activate()},activatePage:function(e,t){if(void 0!=e&&void 0!=t){var n=lsWire.getPage(t,e);void 0===n._isActivated&&n._activate()}},getCustomResourceString:function(e,t){var n;try{var i=JSON.parse(e);n=i[t]}catch(r){n=void 0}return n},getDataItemCount:function(e,t){var n=null,i=null;if(t=void 0==t?!0:t,void 0==e||void 0==e._loader)return n;if(e.isLoaded)n=e.count;else{var r=e._loader._baseQuery._requestUri;r+="&$select=Id&$inlinecount=allpages",i=$.ajax({async:t,dataType:"json",url:r,success:function(e){n=parseInt(e["odata.count"])}})}return t?i:parseInt(n)},noDirectLinking:function(){window.document.body.classList.add("msls-collapsed"),window.location.replace(myapp.rootUri)},goBackOrHome:function(e,t){if(void 0!=e&&void 0!=e.preventDefault&&(e.preventDefault(),e.stopPropagation()),void 0==t&&(t={}),lsWire.getShell().navigationInProgress)msls.showMessageBox("There is a problem navigating back... \nTry again or you will need to refresh your browser... my appologies.");else{var n,i=_.size(lsWire.getShell().navigationStack)>1;if(void 0!=t.beforeNavigation&&(n=t.beforeNavigation(i)),n=void 0==n?!0:n){var r=!1;void 0!=t.replaceNavigation&&(r=t.replaceNavigation(e,i),r=void 0==r?!0:r),r||(i?myapp.navigateBack():myapp.navigateHome())}}},getStyleSheet:function(e){for(var t=0;t<document.styleSheets.length;t++){var n=document.styleSheets[t];if(n.title===e||n.id===e)return n}return void 0},getStyleRule:function(e,t){var n=void 0;if(void 0!==e&&null!==e){var i=void 0==e.cssRules?e.rules:e.cssRules;_.find(i,function(e,i){return e.selectorText===t?(n={index:i,rule:e},!0):!1})}return n},changeStyleRule:function(e,t,n){var i=lsWire.getStyleSheet(e),r=lsWire.getStyleRule(i,t);if(void 0!==n&&null!==n)if(void 0===r||null===r){var a=t+" { ";_.forEach(n,function(e,t){a+=t+":"+e+";"}),a+=" }";var o=void 0==i.cssRules?i.rules.length:i.cssRules.length;i.insertRule(a,o)}else _.forEach(n,function(e,t){r.rule.style[t]=e});else void 0!==r&&null!==r&&i.deleteRule(r.index)},getParentByTagName:function(e,t){if(void 0==e||void 0==t)return null;var n=e;for(t=t.toUpperCase();n&&n.tagName!==t;)n=n.parentElement;return n},getParentByClassName:function(e,t){if(void 0==e||void 0==t)return null;for(var n=e;n&&!n.classList.contains(t);)n=n.parentElement;return n},onceElementAttrChange:function(e,t,n){function i(){return r.css(t)!==a?(r.trigger(t+"Change"),n(),null):(setTimeout(i,50),null)}if(void 0==e||void 0==t||void 0==n)return null;var r=$(e),a=r.css(t);return i(),null},createUid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)})},fixMetadataHandlerForEtag1:function(){window.origMetadataReadFunc=window.OData.metadataHandler.read,window.OData.metadataHandler.read=function(e,t){origMetadataReadFunc.call(window.OData.metadataHandler,e,t);var n=e.data,i=n&&n.dataServices&&n.dataServices.schema&&n.dataServices.schema[0],r=i&&i.entityType||[];r.forEach(function(e){var t,n=e.property||[];for(t=n.length-1;t>=0;t--){var i=n[t];if("Microsoft_LightSwitch_ETag"===i.name){i.type="Edm.String";break}}})}},fixJsonHandlerForEtag2:function(){window.origJsonReadFunc=window.OData.jsonHandler.read,window.OData.jsonHandler.read=function(e,t){var n=origJsonReadFunc.call(window.OData.jsonHandler,e,t),i=e.data,r=i.results;return r&&r.forEach(function(e){if(e.__metadata.etag){for(var t=e.__metadata.etag,n=t.indexOf("'"),i=t.lastIndexOf("'"),r="",a=n+1;i>a;a++){var o=t[a];r+=o,"'"==o&&(r+="'","'"==t[a+1]&&a++)}n>0&&(e.__metadata.etag=t.substr(0,n+1)+r+t.substr(i))}}),n}},getUrlParameterByName:function(e){if(void 0==e)return null;e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",n=new RegExp(t),i=n.exec(window.location);return null==i?"":decodeURIComponent(i[1].replace(/\+/g," "))},roundUp:function(e,t){t=void 0==t?2:t;var n=Math.pow(10,t),i=Math.ceil(e*n);return i/n},nbSpaces:function(e){if(void 0==e)return"";for(var t="",n=0;e-1>n;n++)t+="&nbsp;";return t},iterateOverChildren:function(e,t,n){void 0!=e&&void 0!=t&&(n=void 0==n?"children":n,e&&_.each(e[n],function(e){t(e),lsWire.iterateOverChildren(e,t)}))},getNestedPropertyValue:function(e,t){var n;if(void 0!=t){var i=t.split(".");i&&_.each(i,function(t,r){void 0!=e[t]&&(i.length-1==r?n=e[t]:e=e[t])})}return n},sendGoogleAnalyticsScreenHit:function(e){void 0!=window.ga&&(e=void 0==e?lsWire.getActiveScreen().details._modelId:e,ga("send",{hitType:"pageview",page:""+window.location.hash.split("[")[0],title:e}))},browserIsIE:function(){return _.contains(window.navigator.userAgent.toLowerCase(),"msie")},browserIsSafari:function(){var e=window.navigator.userAgent.toLowerCase();return!_.contains(e,"chrome")&&_.contains(e,"safari")},dataHasChanges:function(e,t){if(void 0==e)return null;var n=myapp.activeDataWorkspace.ApplicationData.details.getChanges();return _.any(n,function(n){return n.details._model.id==e&&(void 0==t?!0:n.details.entityState==t)})},changeDocumentTitle:function(e){setTimeout(function(){document.title=e},0)},mergeTemplateWithData:function(e,t,n){if(void 0==e)return void 0;var i=_.filter(e.split(" "),function(e){return _.contains(e,"}}")});return i=_.map(i,function(e){return{token:e,property:e.replace(/[{}]/g,""),value:null}}),_.forEach(i,function(i){if(void 0!=t){var r=t.findContentItem(i.property);r&&(i.value=void 0!=r.value?r.value.toString():"")}void 0!=n&&lsWire.isEmpty(i.value)&&(i.value=void 0!=n[i.property]?n[i.property].toString():""),void 0!=i.value&&(e=e.replace(i.token,i.value))}),e},on:function(e,t,n){var i=null;if(void 0!=e&&void 0!=e.addEventListener&&void 0!=t&&void 0!=n){e.addEventListener(t,n),i={object:e,event:t,callBack:n};var r=lsWire.getShell().activeNavigationUnit;void 0==r.lsWireEventObjects&&(r.lsWireEventObjects=[]),r.lsWireEventObjects.push(i)}return i},off:function(e){if(void 0!=e.object&&void 0!=e.event&&void 0!=e.callBack){e.removeEventListener(e.event,e.callBack);var t=lsWire.getShell().activeNavigationUnit;void 0!=t.lsWireEventObjects&&t.lsWireEventObjects.length>0&&(t.lsWireEventObjects=_.remove(t.lsWireEventObjects,function(t){return e.object==t.object&&e.event==t.event&&e.callBack==t.callBack}))}},allOff:function(){var e=lsWire.getShell().activeNavigationUnit;void 0!=e.lsWireEventObjects&&e.lsWireEventObjects.length>0&&_.forEach(e.lsWireEventObjects,function(e){e.object.removeEventListener(e.event,e.callBack)})},isEmpty:function(e){return void 0==e||0==e.length},resolveKeyCode:function(e){var t,n=[{key:"backspace",code:8},{key:"tab",code:9},{key:"enter",code:13},{key:"shift",code:16},{key:"ctrl",code:17},{key:"alt",code:18},{key:"break",code:19},{key:"caps lock",code:20},{key:"escape",code:27},{key:"page up",code:33},{key:"page down",code:34},{key:"end",code:35},{key:"home",code:36},{key:"left arrow",code:37},{key:"up arrow",code:38},{key:"right arrow",code:39},{key:"down arrow",code:40},{key:"insert",code:45},{key:"delete",code:46},{key:"0",code:48},{key:"1",code:49},{key:"2",code:50},{key:"3",code:51},{key:"4",code:52},{key:"5",code:53},{key:"6",code:54},{key:"7",code:55},{key:"8",code:56},{key:"9",code:57},{key:"a",code:65},{key:"b",code:66},{key:"c",code:67},{key:"d",code:68},{key:"e",code:69},{key:"f",code:70},{key:"g",code:71},{key:"h",code:72},{key:"i",code:73},{key:"j",code:74},{key:"k",code:75},{key:"l",code:76},{key:"m",code:77},{key:"n",code:78},{key:"o",code:79},{key:"p",code:80},{key:"q",code:81},{key:"r",code:82},{key:"s",code:83},{key:"t",code:84},{key:"u",code:85},{key:"v",code:86},{key:"w",code:87},{key:"x",code:88},{key:"y",code:89},{key:"z",code:90},{key:"left window key",code:91},{key:"right window key",code:92},{key:"select key",code:93},{key:"numpad 0",code:96},{key:"numpad 1",code:97},{key:"numpad 2",code:98},{key:"numpad 3",code:99},{key:"numpad 4",code:100},{key:"numpad 5",code:101},{key:"numpad 6",code:102},{key:"numpad 7",code:103},{key:"numpad 8",code:104},{key:"numpad 9",code:105},{key:"multiply",code:106},{key:"add",code:107},{key:"subtract",code:109},{key:"decimal point",code:110},{key:"divide",code:111},{key:"f1",code:112},{key:"f2",code:113},{key:"f3",code:114},{key:"f4",code:115},{key:"f5",code:116},{key:"f6",code:117},{key:"f7",code:118},{key:"f8",code:119},{key:"f9",code:120},{key:"f10",code:121},{key:"f11",code:122},{key:"f12",code:123},{key:"num lock",code:144},{key:"scroll lock",code:145},{key:";",code:186},{key:"=",code:187},{key:",",code:188},{key:"-",code:189},{key:".",code:190},{key:"/",code:191},{key:"`",code:192},{key:"[",code:219},{key:"\\",code:220},{key:"]",code:221},{key:"'",code:222}];return t="string"==typeof e?_.find(n,{key:e}):_.find(n,{code:e})},enableKeyboardShortcut:function(e,t,n,i,r){if(void 0==e||void 0==t||void 0==n)return null;if(void 0==lsWire.keyboardShortcuts&&(lsWire.keyboardShortcuts={}),"string"==typeof n){var a=lsWire.resolveKeyCode(n.toLowerCase());if(void 0==a)return null;n=a.code}var o=lsWire.createUid(),l="keydown.lsWire_"+o,s="#"+e.details._pageId;void 0==lsWire.keyboardShortcuts[l]&&(lsWire.keyboardShortcuts[l]={screenId:s,shortcutId:l,specialKey:t,key:n,callBack:function(e){e[t]&&e.keyCode==n&&(r&&(e.stopPropagation(),e.preventDefault()),i(e))}});var u=lsWire.getAllDOMHandlers($(s)[0],"keydown");return _.any(u,function(e){return _.contains(e.namespace,"lsWire")})||$(s).off("keydown"),void 0!=lsWire.keyboardShortcuts[l]&&$(s).on(l,lsWire.keyboardShortcuts[l].callBack),l},removeKeyboardShortcut:function(e){if(void 0!=e){var t=lsWire.keyboardShortcuts[e];void 0!=t&&($(t.screenId).off(e,lsWire.keyboardShortcuts[e].callBack),delete lsWire.keyboardShortcuts[e])}},removeAllKeyboardShortcuts:function(e){if(0!=_.size(lsWire.keyboardShortcuts)){var t=lsWire.keyboardShortcuts;if(void 0!=e){var n="#"+e.details._pageId;t=_.filter(lsWire.keyboardShortcuts,function(e){return e.screenId==n})}_.forEach(t,function(e){$(e.screenId).off(e.shortcutId),delete lsWire.keyboardShortcuts[e.shortcutId]})}},getAllDOMHandlers:function(e,t,n){var i=[],r=$._data(e,"events");return r&&(i=r[t],n&&(i=_.filter(i,function(e){return e.namespace==n}))),i},removeDisplayNameListener:function(e){void 0!=e&&e.details.removeChangeListener("displayName",e.details._listeners.displayName_change[0].listener)},getWhatsChanged:function(){var e=myapp.activeDataWorkspace.details.getChanges(),t=[];return _.forEach(e,function(e){var n={entityId:e.Id,modelId:e.details._model.id,state:e.details.entityState,whatChanged:[]},i=_.keys(e.details._);i=_.filter(i,function(e){return _.contains(e,"IsEdited")}),_.forEach(i,function(t){t=t.replace("_IsEdited","").replace(/_/g,"");var i={propertyName:t,valueBefore:e.details._.__original[t],valueNow:e.details._[t]};n.whatChanged.push(i)}),t.push(n)}),t},saveToLocalStorage:function(e,t,n){var i=!1;if("undefined"!=typeof Storage){var r=n?"sessionStorage":"localStorage";try{window[r].setItem(e,t),i=!0}catch(a){i=!1}}return i},getFromLocalStorage:function(e,t){var n=null;if("undefined"!=typeof Storage){var i=t?"sessionStorage":"localStorage";try{n=window[i].getItem(e)}catch(r){n=null}}return n},removeFromLocalStorage:function(e,t){var n=null;if("undefined"!=typeof Storage){var i=t?"sessionStorage":"localStorage";try{window[i].removeItem(e),n=!0}catch(r){n=null}}return n},removeAllFromLocalStorage:function(e){var t=null;if("undefined"!=typeof Storage){var n=e?"sessionStorage":"localStorage";try{window[n].clear(),t=!0}catch(i){t=null}}return t},changeTheme:function(e,t){if(void 0!=e&&void 0!=t){var n=_.filter(window.document.head.getElementsByTagName("link"),function(e){return _.contains(e.href.toLowerCase(),"theme")});_.forEach(n,function(n){var i=n.href.toLowerCase(),r=i.lastIndexOf("/"),a=i.substring(0,r),o=i.substr(r);o=o.replace(e,t),i=a+o,n.href=i})}},changeDisplayValue:function(e,t,n){t.dataBind("value",function(t){if(void 0!=t){var i=void 0!=n?n():t;e.getElementsByClassName("id-element")[0].innerHTML=i}})},detailsPickerDisplayValue:function(e,t,n){t.dataBind("_view.isRendered",function(i){i&&void 0!=t.value&&setTimeout(function(){var i=$(e).find("input").first();null!=i&&($("input.ui-input-text",e).val(n()),$("input.ui-input-text",e).off("focusout").on("focusout",function(i){null!=t.value&&$("input.ui-input-text",e).val(n(i))}))},200),t.dataBind("value",function(i){if(t._view.isRendered&&void 0!=i){var r=$(e).find("input").first();null!=r&&$("input.ui-input-text",e).val(n())}})})},userHasPermission:function(e,t){if(void 0==e)return!1;var n=!1,i=e.split(":");return e=i[1]||e,t&&void 0!=lsWire.userInfo?n=_.contains(lsWire.userInfo.Permissions,e):$.ajax({async:!1,url:lsWire.webApiPath+"security/userHasPermission/"+e,success:function(e){n=e}}),n},userHasRole:function(e,t){if(void 0==e)return!1;var n=!1;return t&&void 0!=lsWire.userInfo?n=_.contains(lsWire.userInfo.Roles,e):$.ajax({async:!1,url:lsWire.webApiPath+"security/userHasRole/"+e,success:function(e){n=e},error:function(){}}),n},getUserInfo:function(e){return(void 0==lsWire.userInfo||e)&&$.ajax({async:!1,url:lsWire.webApiPath+"security/GetUserInfo",success:function(e){lsWire.userInfo=e},error:function(){lsWire.userInfo=null}}),void 0===lsWire.userInfo&&(lsWire.userInfo=null),lsWire.userInfo},getSecurityInfo:function(e){return(void 0==lsWire.appRoles||void 0==lsWire.appPermissions||e)&&$.ajax({async:!1,url:lsWire.webApiPath+"security/GetAppSecurityObjects",success:function(e){lsWire.appRoles=e.Roles,lsWire.appPermissions=e.Permissions},error:function(){lsWire.appRoles=null,lsWire.appPermissions=null}}),void 0===lsWire.appRoles&&(lsWire.appRoles=null),void 0===lsWire.appPermissions&&(lsWire.appPermissions=null),{appRoles:lsWire.appRoles,appPermissions:lsWire.appPermissions}},getAppConfig:function(e){return(void 0==lsWire.appConfig||e)&&$.ajax({async:!1,url:lsWire.webApiPath+"file/getAppConfig/",success:function(e){lsWire.appConfig=e},error:function(){lsWire.appConfig={}}}),void 0===lsWire.appConfig&&(lsWire.appConfig={}),lsWire.appConfig},passwordValidator:function(e,t,n){void 0!=e&&t!=undefiend&&(lsWire.changeInputToPassword(e),t.dataBind("value",function(e){var i=lsWire.validatePassword(t);void 0!==n&&null!==n&&i&&lsWire.validateConfirmPassword(n,e)}))},confirmPasswordValidator:function(e,t,n){void 0!=e&&n!=undefiend&&(lsWire.changeInputToPassword(e),t.dataBind("value",function(){lsWire.validateConfirmPassword(t,n.value)}))},changeInputToPassword:function(e){void 0!=e&&$(e).find(".id-element").attr("type","password")},validatePassword:function(e){if(void 0==e)return!1;var t=!0;e._alwaysShowValidationResults=!0;var n=e.value;return void 0!==n&&null!==n&&(lsWire.isValidPassword(n)?e.validationResults.length>0&&(e.validationResults=[]):(e.validationResults=[new msls.ValidationResult(e,"Not a valid password!")],t=!1)),t},validateConfirmPassword:function(e,t){if(void 0==e||void 0==t)return!1;var n=!0;e._alwaysShowValidationResults=!0;var i=e.value;return void 0!==i&&null!==i&&(i!==t?(e.validationResults=[new msls.ValidationResult(e,"Passwords do not match!")],n=!1):e.validationResults.length>0&&(e.validationResults=[])),n},isValidPassword:function(e){return void 0==e?!1:null===e.match(/[@+#$]/)?!1:null===e.match(/^\S+$/)?!1:null===e.match(/^.{8,20}$/)?!1:null!==e.match(/(.)(.*\1){2}/)?!1:null===e.match(/^[^~,'.:;^|]+$/)?!1:!0},getScreenInternalDetails:function(e){var t=null;try{if(void 0==e&&(e=lsWire.getActiveScreen()),void 0!=e){var n=_.find(e.details.startPage._dependents.isVisible,function(e){return!!e.trackingStub.o._buttons});void 0!=n&&(t=n.trackingStub.o)}}catch(i){return t}return t},hideScreenButton:function(e,t,n){var i,r="#"+e.details._pageId;switch(t){case"save":i=".msls-save-button";break;case"cancel":i=".msls-cancel-button";break;case"discard":i=".msls-discard-button";break;case"ok":i=".msls-ok-button";break;default:return}void 0==n||1==n?$(i,r).addClass("msls-collapsed"):$(i,r).removeClass("msls-collapsed")},changeScreenHomeButton:function(e,t,n,i){setTimeout(function(){e=void 0==e?lsWire.getActiveScreen():e;var r="#"+e.details._pageId+" .titles-bar .msls-back-button-contain",a=document.querySelector(r);if(null!=a){if(void 0!=n&&(a.getElementsByClassName("subControl")[0].title=n),void 0!=t){var o=a.querySelector(".msls-home-button .ui-icon");void 0!=o&&(o.classList.remove("ui-icon-msls-home"),o.classList.add(t),a.style.paddingRight="10px")}void 0!=i&&($(".msls-home-button").off("vclick"),$(a).off("vclick").on("vclick",i))}},0)},changeScreenButton:function(e,t,n,i){e=void 0==e?lsWire.getActiveScreen():e,setTimeout(function(){if(void 0!=t){t=t.toLowerCase();var r=_.find(lsWire.getScreenInternalDetails(e).parent._subControls,function(e){var n=!1;return void 0!=e.content&&(n=e.content.toLowerCase()==t),n});if(void 0!=r){var a=r.getView();if(void 0!=a&&(void 0!=i&&(a[0].title=i),void 0!=n)){n=_.contains(n,"ui-icon-")?n:"ui-icon-"+n;var o=a.find(".ui-icon");if(void 0!=o){var l=_.find(o[0].classList,function(e){return _.contains(e,"ui-icon-msls-")});$(o).removeClass(l).addClass(n)}}}}},0)},addScreenHomeButton:function(e,t,n,i){e=void 0==e?lsWire.getActiveScreen():e;var r="#"+e.details._pageId+" .titles-bar .msls-back-button-contain",a=document.querySelector(r);if(null==a){var o=$('<span class="ui-btn-text">Home</span>'),l=$('<span class="ui-btn-inner"></span>'),s=$('<a class="id-element ui-btn ui-btn-up-a ui-shadow ui-btn-corner-all ui-mini" data-role="button" data-theme="a" data-mini="true" data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperEls="span"></a>'),u=$('<span class="ui-btn-text"></span>'),c=$('<span class="ui-icon"></span>'),d=$('<span class="ui-btn-inner" style="padding-right: 10px;"></span>'),f=$('<div tabindex="0" title="" class="subControl msls-home-button msls-large-icon msls-tap ui-btn ui-btn-up-a ui-shadow ui-btn-corner-all ui-btn-icon-notext" data-role="button" data-theme="a" data-ls-tap="tap:{data.shell.homeCommand.command}" data-ls-isenabled="isEnabled:{tap.canExecute}" data-ls-content="content:{data.shell.homeCommand.displayName}" data-iconpos="notext" data-icon="msls-home" data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperEls="span"></div>'),v=$('<div class="msls-back-button-contain"></div>');t=void 0==t?"ui-icon-msls-home":t,n=void 0==n?"Home":n,$(c).addClass(t).addClass("ui-icon-shadow"),$(f).attr("title",n),l.append(o),s.append(l),u.append(s),d.append(u),d.append(c),f.append(d),v.append(f),$("#"+e.details._pageId+" .titles-bar").prepend($(v)),void 0==i&&(i=function(e){void 0!=e&&void 0!=e.preventDefault&&(e.preventDefault(),e.stopPropagation()),lsWire.getShell().finishNavigation().then(function(){lsWire.getShell().navigateHome()})}),$(v).on("vclick",i)}},addTabBarButton:function(e,t,n,i){e=void 0==e?lsWire.getActiveScreen():e;var r="#"+e.details._pageId+" .msls-tabs-bar .msls-back-button-contain",a=document.querySelector(r);if(null==a){var o=$('<span class="ui-btn-text">Home</span>'),l=$('<span class="ui-btn-inner"></span>'),s=$('<a class="id-element ui-btn ui-btn-up-a ui-shadow ui-btn-corner-all ui-mini" data-role="button" data-theme="a" data-mini="true" data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperEls="span"></a>'),u=$('<span class="ui-btn-text"></span>'),c=$('<span class="ui-icon"></span>'),d=$('<span class="ui-btn-inner" style="padding-right: 10px;"></span>'),f=$('<div tabindex="0" title="" class="subControl msls-home-button msls-large-icon msls-tap ui-btn ui-btn-up-a ui-shadow ui-btn-corner-all ui-btn-icon-notext" data-role="button" data-theme="a" data-ls-tap="tap:{data.shell.homeCommand.command}" data-ls-isenabled="isEnabled:{tap.canExecute}" data-ls-content="content:{data.shell.homeCommand.displayName}" data-iconpos="notext" data-icon="msls-home" data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperEls="span"></div>'),v=$('<div class="msls-back-button-contain"></div>');t=void 0==t?"ui-icon-msls-home":t,n=void 0==n?"Home":n,$(c).addClass(t).addClass("ui-icon-shadow"),$(f).attr("title",n),l.append(o),s.append(l),u.append(s),d.append(u),d.append(c),f.append(d),v.append(f),$("#"+e.details._pageId+" .msls-tabs-bar").prepend($(v)),void 0==i&&(i=function(e){void 0!=e&&void 0!=e.preventDefault&&(e.preventDefault(),e.stopPropagation()),lsWire.getShell().finishNavigation().then(function(){lsWire.getShell().navigateHome()})}),$(v).on("vclick",i),$(v).css("float","left"),$(v).css("padding-top","5px")}},hideScreenTitleBar:function(e,t){if(e=void 0==e?lsWire.getActiveScreen():e,t=void 0==t?!0:t,"Screen"==e.details._rootContentItem.kind){var n=document.getElementById(e.details._pageId).getElementsByClassName("titles-bar")[0];void 0!=n&&(t?n.classList.add("msls-collapsed"):n.classList.remove("msls-collapsed"))}},showDeleteDialogBox:function(e,t,n,i,r){i=void 0!=i?i:"Delete?",n=void 0!=n?n:"",e=void 0!=e?e:"commit",void 0!=t&&msls.showMessageBox(n,{title:i,buttons:msls.MessageBoxButtons.yesNo}).then(function(n){n===msls.MessageBoxResult.yes&&(void 0!=r?r(t):(t.deleteEntity(),"apply"===e.toLowerCase()?myapp.applyChanges():myapp.commitChanges()))})},showDiscardDialogBox:function(e,t,n,i,r){var a=e?lsWire.shell.anyNavigationUnitHasChanges():lsWire.screenHasChanges();return t=t?t:"Discard your Changes?",n=n?n:"",a?msls.showMessageBox(n,{title:t,buttons:msls.MessageBoxButtons.yesNo}).then(function(e){return e==msls.MessageBoxResult.yes?(e=!0,void 0!=i&&i()):(e=!1,void 0!=r&&r()),e}):(void 0!=i&&i(),!0)},showPopup:function(e,t,n,i,r,a){r=void 0==r?lsWire.getActiveScreen():r,void 0==r.findContentItem(e)||lsWire.getShell().navigationInProgress||r.showPopup(e).then(function(){var e=document.getElementsByClassName("ui-popup-active")[0];void 0!=t&&(isNaN(t)&&"centered"==t&&(t=window.innerHeight/2-e.offsetHeight/2),e.style.top=_.contains(t,"px")?t:t+"px"),void 0!=n&&(isNaN(n)&&"centered"==n&&(n=window.innerWidth/2-e.offsetWidth/2),e.style.left=_.contains(n,"px")?n:n+"px"),void 0!=i&&e.classList.add(i),void 0!=a&&a(e)})},renderMultiLineTabHeaders:function(e){if(e=void 0==e?lsWire.getActiveScreen():e,"Screen"==e.details._rootContentItem.kind){var t=e.details.pages,n="#"+e.details._pageId+" .msls-screen-tab",i=document.querySelectorAll(n);_.forEach(t,function(e){if(-1!==e.displayName.indexOf("<br")){var t=_.find(i,function(t){return $(t).data().mslsTabName==e.name}),n=t.getElementsByClassName("id-element"),r=document.createElement("span");r.innerHTML=e.displayName,n[0].textContent=null,n[0].appendChild(r)}})
}},disableAllChildren:function(e){lsWire.iterateOverChildren(e,function(e){lsWire.disableControl(e)})},disableControl:function(e){var t="Details"==e.kind&&e.model.view.isPicker;("Value"==e.kind||t)&&(e.isEnabled=!1,void 0!=e._view&&(e._view._contentContainer.attr("aria-disabled","true"),t&&e._view._contentContainer.find(".id-modal-button.msls-has-search").hide()))},disableAllControls:function(e){void 0!=e&&lsWire.disableAllChildren(e)},getPage:function(e,t){if(void 0==e)return null;t=void 0==t?lsWire.getActiveScreen():t;var n=null;if(void 0==t)return null;for(var i=t.details.pages,r=0;r<i.length;r++)if(i[r].name===e){n=i[r];break}return n},hideScreenButtons:function(e,t){e=void 0==e?lsWire.getActiveScreen():e,t=void 0==t?!0:t;var n="#"+e.details._pageId+" .titles-bar";document.querySelector(n).getElementsByClassName("msls-screen-buttons")[0].style.display=t?"none":"inline"},screenHasValidationErrors:function(e){e=void 0==e?lsWire.getActiveScreen():e;var t=!1;return _.each(e.details.pages,function(e){t||(t=_.any(e.children,function(e){return e.hasValidationErrors(!0)}))}),t},screenHasChanges:function(){var e=lsWire.getShell().activeNavigationUnit;return e.hasChanges||void 0!=e.nestedChangeSet&&e.nestedChangeSet.hasNestedChanges},clearScreenValidationErrors:function(e){function t(e,n){var i=[];return 0==n.children.length?i:($.each(n.children,function(n,r){$.each(e,function(e,t){r.kind==t&&i.push(r)}),i=i.concat(t(e,r))}),i)}e=void 0==e?lsWire.getActiveScreen():e;var n=[];n.push(msls.ContentItemKind.details),n.push(msls.ContentItemKind.value),n.push(msls.ContentItemKind.collection);var i=t(n,e.details.rootContentItem),r=_.filter(i,function(e){return e.validationResults.length>0});_.forEach(r,function(e){e.validationResults=[]})},getActiveScreen:function(){var e=lsWire.getShell(),t=null;return void 0!=e&&(t=e.activeNavigationUnit.screen),t},allowScreenTitleToWrap:function(e){if(e=void 0==e?lsWire.getActiveScreen():e,"Screen"==e.details._rootContentItem.kind){var t="#"+e.details._pageId+" h1.msls-title .msls-text",n=document.querySelector(t);void 0!=n&&n.classList.add("lswire-text-allowwrap")}},changeScreenTitle:function(e,t,n,i,r){var a,o="lswire-title-container";if(e=void 0==e?lsWire.getActiveScreen():e,"Screen"==e.details._rootContentItem.kind){var l="#"+e.details._pageId,s="#"+e.details._pageId+" h1.msls-title .msls-text .id-element",u=$(s);if($(u).text(t),void 0!=n){i=void 0==i?"above":_.contains("above below",i.toLowerCase())?i.toLowerCase():"above",r=void 0==r?"lswire-screen-subtitle":r,$(l+" h1.msls-title").addClass(o);var c=$(l+" ."+r);c.length>0?"above"==i?$(c).text(n).append("<br>"):$(c).text(n).prepend("<br>"):(a=$("<span></span").addClass(r).text(n),"above"==i?($(a.append("<br>")),$(u).addClass("lswire-screen-title").parent().prepend(a)):($(a).prepend("<br>"),$(u).addClass("lswire-screen-title").parent().append(a))),"above"==i&&($(".msls-navmenu-button",l).css("top","30px"),$(".msls-back-button-contain",l).addClass("lswire-two-titles-button"))}else $(".msls-back-button-contain",l).removeClass("lswire-two-titles-button"),$(".lswire-screen-subtitle",l).html("")}},disableScreenPropertyBinding:function(e,t,n){if(e&&t){var i=lsWire.shell.shellView._pageIdMapping[e.details._pageId];if(i){var r=i.unit;if(r){var a=_.find(r.task.__dependencies,function(e){return e.bindingPath==t});n?a.activate():a.deactivate()}}}},activateScreenHeaderDock:function(e){e.lsWire=e.lsWire||{};var t=e.lsWire;t.pageId="#"+e.details._pageId,t.fixedElement=$(".msls-header-area",t.pageId)[0],t.scrollingElement=$(".msls-content",t.pageId)[0],t.fixed=!1,void 0!=t.scrollingElement&&(t.bottom=t.fixedElement.getBoundingClientRect().bottom,t.scrollingItemTop=t.scrollingElement.getBoundingClientRect().top,t[t.pageId+"_catchScroll"]=function(){var e=t.scrollingElement.getBoundingClientRect().top;0==t.fixed&&e<=t.bottom?($(t.fixedElement).addClass("lswire-fixed-element"),t.fixed=!0):e>=0&&1==t.fixed&&($(t.fixedElement).removeClass("lswire-fixed-element"),t.fixed=!1)},$(document).on("scroll",t[t.pageId+"_catchScroll"]))},disposeScreenHeaderDock:function(e){var t=e.lsWire;t&&void 0!=t[t.pageId+"_catchScroll"]&&($(document).off("scroll",t[t.pageId+"_catchScroll"]),t[t.pageId+"_catchScroll"]=null)},sizeDialogScreen:function(e,t){if(void 0!=e){if(void 0!=t&&!t)return void lsWire.changeStyleRule("dynamicCss",".msls-dialog-frame");var n=e.details.startPage.properties.maxWidth,i=e.details.rootContentItem.properties.showAsDialog;i&&void 0!=n&&n>0&&lsWire.changeStyleRule("dynamicCss",".msls-dialog-frame",{"max-width":n+"px"})}},replaceScreenNav:function(e){void 0!=e&&(lsWire.clearScreenNav(),lsWire.appendToScreenNav(e))},appendToScreenNav:function(e){void 0!=e&&_.forEach(e,function(e){lsWire.insertIntoScreenNav(e.displayName,e.callBack)})},clearScreenNav:function(){var e=lsWire.getShell();if(void 0!=e&&e.hasNavigationMenu()){void 0===e._navigationMenu&&e.getNavigationMenu();for(var t=e._navigationMenu.items;t.length>0;)t.pop()}},disableScreenNav:function(e){var t=void 0==e?"":"#"+e.details._pageId+" ",n=t+".subControl.ui-title.msls-title .msls-text.msls-btn-title",i=t+".subControl.ui-title.msls-title .msls-navmenu-button",r=document.querySelectorAll(n),a=document.querySelectorAll(i);_.forEach(a,function(e){e.classList.add("msls-collapsed")}),_.forEach(r,function(e){$(e).off("vclick").removeClass("msls-btn-title")})},insertIntoScreenNav:function(e,t,n){var i=lsWire.getShell();if(void 0!=e&&void 0!=t&&void 0!=i&&i.hasNavigationMenu()){void 0===i._navigationMenu&&i.getNavigationMenu();var r=new Object;r._displayName=e,r.displayName=e,r._command=t,r.execute=function(){this._command()},void 0===n?i._navigationMenu.items.push(r):i._navigationMenu.items.splice(n,0,r)}},removeScreenNavItem:function(e){var t=lsWire.getShell();if(void 0!=e&&void 0!=t&&t.hasNavigationMenu()){void 0===t._navigationMenu&&t.getNavigationMenu();var n=t._navigationMenu.items;_.remove(n,function(t){return t._displayName==e})}},showTab:function(e,t,n,i){void 0!=e&&(i=void 0==i?lsWire.getActiveScreen():i,lsWire.getShell().finishNavigation().then(function(){return void 0==t&&void 0==n?void i.showTab(e):void 0==t&&void 0!=n?void i.showTab(e).then(function(){n(e)}):void 0!=t&&void 0==n?void i.showTab(e,{beforeShown:t(e)}):void(void 0!=t&&void 0!=n&&i.showTab(e,{beforeShown:t(e)}).then(function(){n(e)}))}))},showFirstVisibleTab:function(e){var t=_.find(e.details.pages,function(e){return 1==e.isVisible});void 0!=t&&lsWire.shell.finishNavigation().then(function(){lsWire.showTab(t.name,null,null,e)})},getActiveTabName:function(e){return e=void 0==e?lsWire.getActiveScreen():e,lsWire.getScreenInternalDetails(e).activeTab},hideTab:function(e,t,n){if(void 0!=e){n=void 0==n?lsWire.getActiveScreen():n;var i=n.findContentItem(e);void 0!=i&&(i.isVisible=!t)}},hideTabs:function(e){_.forEach(e.details.pages,function(e){var t=JSON.parse(e.description).permission;void 0==t||lsWire.userHasPermission(t)||(e.isVisible=!1)})},getTabButtons:function(e){e=void 0==e?lsWire.getActiveScreen():e;for(var t={},n=lsWire.getScreenInternalDetails(e)._buttons,i=0;i<n.length;i++)t[n[i].data.name]=n[i];return t},addTabButtonClass:function(e,t,n){if(void 0!=e){n=void 0==n?lsWire.getActiveScreen():n;var i=lsWire.getTabButtonElement(e,n);i.hasClass(t)||i.addClass(t)}},removeTabButtonClass:function(e,t,n){if(void 0!=e&&void 0!=t){n=void 0==n?lsWire.getActiveScreen():n;var i=lsWire.getTabButtonElement(e,n);i.hasClass(t)&&i.removeClass(t)}},getTabButtonElement:function(e,t){if(void 0==e)return null;t=void 0==t?lsWire.getActiveScreen():t;var n=lsWire.getTabButtons(t),i=$(n[e]._element),r=i.find(".ui-btn-text");return 0!=r.length?r:i},tabHasValidationErrors:function(e,t){if(void 0==e)return!1;var n,i=!1;t=void 0==t?lsWire.getActiveScreen():t;var r=_.find(t.details.rootContentItem.children,function(e){return"Tabs"==e.displayName});return void 0!=r&&(n=_.find(r.children,function(t){return t.name==e}),i=n.hasValidationErrors(!0)),void 0!=n&&i&&void 0!=n._view&&(i=n.validationResults.length>0),i},getTabs:function(e){return e=void 0==e?lsWire.getActiveScreen():e,lsWire.getScreenInternalDetails(e).children},getActiveTab:function(e){e=void 0==e?lsWire.getActiveScreen():e;var t=lsWire.getScreenInternalDetails(e).activeTab;return lsWire.getTab(t,e)},getTab:function(e,t){if(void 0==e)return null;var n=null;t=void 0==t?lsWire.getActiveScreen():t;for(var i=lsWire.getTabs(t),r=0;r<i.length;r++)if(i[r].data.name===e){n=i[r];break}return n},getContentItemTab:function(e){if(void 0==e)return null;for(var t=e.parent;void 0!=t&&"Tab"!=t.kind;)t=t.parent;return void 0==t?void 0:lsWire.getTab(t.name,e.screen)},setTabValidationError:function(e,t,n){if(void 0!=e){var i=lsWire.getPage(e,t);n=void 0==n?"validationErrors":n,void 0!=i&&(_.any(i.children,function(e){return e.hasValidationErrors(!0)})?lsWire.addTabButtonClass(e,n,t):lsWire.removeTabButtonClass(e,n,t))}},changeActiveTabHeaderColor:function(e){void 0!=e&&lsWire.changeStyleRule("dynamicCss",".msls-screen-tab-active .ui-btn-text",{color:e})},changeTabHeaderToDoubleLine:function(e){var t={height:"5.5em","margin-top":"-7px","padding-top":"0px"};void 0!==e&&null!==e&&e===!1&&(t=void 0),lsWire.changeStyleRule("dynamicCss",".msls-header .msls-tabs-bar",t)},tabHeaderScrollFix:function(){if(!lsWire.tabHeaderScrollFixApplied){var e=$(".msls-tabs-bar").height();e+=10;var t={height:e+"px"};lsWire.changeStyleRule("dynamicCss",".msls-header .msls-tabs-bar",t),lsWire.tabHeaderScrollFixApplied=!0}},changeTabDisplayName:function(e,t,n){if(!lsWire.isEmpty(e)){n=void 0==n?lsWire.getActiveScreen():n;var i="#"+n.details._pageId,r=_.find($(".msls-screen-tab",i),function(t){return $(t).data().mslsTabName==e});if(lsWire.isEmpty(t)){t="";var a=_.find(n.details.pages,function(t){return t.name==e});void 0!=a&&(t=a.displayName)}var o=$(".ui-btn-text",r);0==o.length&&(o=$(".id-element",r)),o.length>0&&($(o)[0].textContent=t)}},appendToTabDisplayName:function(e,t,n){if(!lsWire.isEmpty(e)){n=void 0==n?lsWire.getActiveScreen():n;var i="#"+n.details._pageId,r=_.find($(".msls-screen-tab",i),function(t){return $(t).data().mslsTabName==e}),a=_.find(n.details.pages,function(t){return t.name==e});t=void 0!=a?lsWire.isEmpty(t)?a.displayName:a.displayName+" "+t:"";var o=$(".ui-btn-text",r);0==o.length&&(o=$(".id-element",r)),o.length>0&&($(o)[0].textContent=t)}},hideTabsBar:function(e,t){if(t=void 0==t?!0:t,e=void 0==e?lsWire.getActiveScreen():e,"Screen"==e.details._rootContentItem.kind){var n=document.getElementById(e.details._pageId).getElementsByClassName("msls-tabs-bar")[0];void 0!=n&&(t?n.classList.add("msls-collapsed"):n.classList.contains("msls-collapsed")&&n.classList.remove("msls-collapsed"))}},addHeaderToLayout:function(e,t){if(void 0!=e){t=t||"msls-control-header";var n=e.properties.attachedLabelPosition;if("Hidden"!==n&&"None"!==n){var i=e._view._container[0],r=document.createElement("div"),a=document.createTextNode(e.displayName);r.className=t,r.style.marginLeft="10px",r.appendChild(a),i.insertBefore(r,i.firstChild)}}},initializeTableControl:function(e){var t=function(){function t(){if(void 0!=S.contentItem&&void 0!=S.element){var t=typeof myapp.activeDataWorkspace[S.dataSourceName][S.dataTableName];e.contentItem.details._entry.simpleDescriptor.createQuery=function(){return"function"==t?this.dataWorkspace[S.dataSourceName][S.dataTableName]().filter(S.filterString).orderBy(S.sortString):this.dataWorkspace[S.dataSourceName][S.dataTableName].filter(S.filterString).orderBy(S.sortString)},$("th",S.element).each(function(e){var t=S.tableColumns[e];S.sortColumns.push(t),S.filterColumns.push(t),"Command"!==t.kind&&(t.enhancedTable={},t.enhancedTable.sort={},t.enhancedTable.filter={},t.enhancedTable.sort.element=$("<div class='lswire-sort-element'><span id='text'></span><span id='icon'></span><span id='iconText' class='lswire-sort-icon-text'></span></div>"),t.enhancedTable.filter.element=$("<div class='lswire-filter-element'><span id='text' class='lswire-filter-icon-text'></span><div id='icon' class='ui-btn-no-text ui-btn-inner ui-icon ui-icon-bars lswire-filter-icon-element'></div></div>"),$("#text",t.enhancedTable.sort.element).text(t.displayName),$(this).off("vclick").on("vclick",function(e){e.stopPropagation()}),$(this).html(""),$(this).append(t.enhancedTable.sort.element),$(this).append(t.enhancedTable.filter.element),t.enhancedTable.sort.direction=null,t.enhancedTable.sort.position=null,t.enhancedTable.filter.position=null,t.enhancedTable.odataName=t.bindingPath.slice(5).replace(".","/"),n(t),S.filterDisabled||i(t),S.filterDisabled&&$(t.enhancedTable.filter.element).hide())})}}function n(e){var t=e.enhancedTable.sort;$(t.element).css("cursor","pointer"),$(t.element).on("click",function(e){switch(e.stopPropagation(),t.direction){case"asc":t.direction="desc";break;case"desc":t.direction=null,t.position=null,S.sortColumns=_.sortBy(S.sortColumns,function(e){return null==e.enhancedTable.sort.position?1e4:e.enhancedTable.sort.position});break;default:t.direction="asc",t.position=1e3,S.sortColumns=_.sortBy(S.sortColumns,function(e){return null==e.enhancedTable.sort.position?1e4:e.enhancedTable.sort.position})}_.each(S.sortColumns,function(e,t){null!=e.enhancedTable.sort.position&&(e.enhancedTable.sort.position=t)}),S.batchMode||d(),y()})}function i(e){var t=e.enhancedTable.filter;t.set=[],t.concatType=null;var n=e.valueModel.propertyType;t.dataType=n.__isPrimitiveType?n.id:n.underlyingType.id,$(t.element).css("cursor","pointer");var i=S.screen.findContentItem(S.filterPopupName);void 0!=i&&$(t.element).on("click",function(t){t.stopPropagation(),$("div[data-msls-name*='"+S.filterPopupName+"']").remove(),S.activeColumn=e,r(),a(),o(),S.screen[S.filterPopupColumnName]=e.displayName,S.screen.showPopup(S.filterPopupName)})}function r(){var e=S.activeColumn.enhancedTable.filter,t=[];t.push(S.screen.findContentItem(S.filterPopupOperatorName1)),t.push(S.screen.findContentItem(S.filterPopupOperatorName2));var n,i=0;-1!=e.dataType.indexOf(":String")?(i=2,n=[{stringValue:"Is equal to",value:"eq"},{stringValue:"Is not equal to",value:"ne"},{stringValue:"Starts with",value:"startswith"},{stringValue:"Contains",value:"substringof"},{stringValue:"Does not contain",value:"not substringof"},{stringValue:"Ends with",value:"endswith"}]):n=-1!=e.dataType.indexOf(":Date")?[{stringValue:"Is equal to",value:"eq"},{stringValue:"Is not equal to",value:"ne"},{stringValue:"Is after or equal to",value:"ge"},{stringValue:"Is after",value:"gt"},{stringValue:"Is before or equal to",value:"le"},{stringValue:"Is before",value:"lt"}]:[{stringValue:"Is equal to",value:"eq"},{stringValue:"Is not equal to",value:"ne"},{stringValue:"Is greater than or equal to",value:"ge"},{stringValue:"Is greater than",value:"gt"},{stringValue:"Is less than or equal to",value:"le"},{stringValue:"Is less than",value:"lt"}];for(var r=0;r<t.length;r++){var a=n[i].value,o=n[i].stringValue;if(void 0!=e.set[r]&&void 0!=e.set[r].operator){var l=_.find(n,function(t){return t.value==e.set[r].operator});l&&(a=l.value,o=l.stringValue)}t[r].choiceList=n,t[r].value=a,t[r].stringValue=o,S.screen[t[r].name]=a}}function a(){var e=S.activeColumn.enhancedTable.filter,t=S.screen.findContentItem(S.filterPopupConcatName);t.choiceList=[{stringValue:"And",value:"and"},{stringValue:"Or",value:"or"}],S.screen[t.name]=e.concatType||"or"}function o(){var e=S.activeColumn.enhancedTable.filter,t=[];t.push(S.screen.findContentItem(S.filterPopupValueName1)),t.push(S.screen.findContentItem(S.filterPopupValueName2));for(var n=0;n<t.length;n++){var i=null;void 0!=e.set[n]&&void 0!=e.set[n].value&&(i=e.set[n].value),S.screen[t[n].name]=i}}function l(){S.filterString="",S.filterDisabled||_.each(S.filterColumns,function(e){if(void 0!=e.enhancedTable.filter.position&&null!=e.enhancedTable.filter.position){var t=u(e.enhancedTable.filter,e.enhancedTable.odataName);S.filterString.length>0&&t.length>0&&(S.filterString+=" and "),S.filterString+=t}})}function s(){S.sortString="",_.each(S.sortColumns,function(e){void 0!=e.enhancedTable.sort.position&&null!=e.enhancedTable.sort.position&&(S.sortString+=e.enhancedTable.odataName+" "+e.enhancedTable.sort.direction+", ")}),S.sortString=S.sortString.slice(0,-2)}function u(e,t){var n,i="";return void 0!=e.set[0]&&_.each(e.set,function(r){var a=r.value;n=c(r.operator,e.dataType),-1!=e.dataType.indexOf(":Date")&&(a=new Date(a)),i.length>0&&(i+=e.concatType+" "),i+=String.format(n,t,r.operator,msls._toODataString(a,e.dataType))}),""!=i?"("+i+")":i}function c(e,t){var n;if(-1!=t.indexOf(":String"))switch(e){case"substringof":n="{1}({2}, {0}) ";break;case"not substringof":n="{1}({2}, {0}) ";break;case"startswith":n="{1}({0}, {2}) ";break;case"endswith":n="{1}({0}, {2}) ";break;default:n="{0} {1} {2} "}else n="{0} {1} {2} ";return n}function d(){l(),s(),S.visualCollection.refresh()}function f(){v(),m()}function v(){_.each(S.sortColumns,function(e){e.enhancedTable.sort.position=null,e.enhancedTable.sort.direction=null}),y()}function p(e){void 0==e&&(e=!0),e&&m(),_.each(S.filterColumns,function(t){if(e)$(t.enhancedTable.filter.element).hide();else{var n=S.screen.findContentItem(S.filterPopupName);void 0!=n&&$(t.enhancedTable.filter.element).show()}})}function h(){var e=S.activeColumn.enhancedTable.filter;e.set=[],void 0!=S.screen[S.filterPopupValueName1]&&null!=S.screen[S.filterPopupValueName1]&&(e.set.push({operator:S.screen[S.filterPopupOperatorName1],value:S.screen[S.filterPopupValueName1]}),void 0!=S.screen[S.filterPopupValueName2]&&null!=S.screen[S.filterPopupValueName2]&&e.set.push({operator:S.screen[S.filterPopupOperatorName2],value:S.screen[S.filterPopupValueName2]})),null==e.position&&(e.position=e.set.length>0?1e3:null),e.concatType=S.screen[S.filterPopupConcatName],S.filterColumns=_.sortBy(S.filterColumns,function(e){return null==e.enhancedTable.filter.position?1e4:e.enhancedTable.filter.position}),_.each(S.filterColumns,function(e,t){null!=e.enhancedTable.filter.position&&(e.enhancedTable.filter.position=t)}),S.batchMode||d(),y()}function m(){_.each(S.filterColumns,function(e){var t=e.enhancedTable.filter;t.position=null,t.set=[],t.concatType=null}),y()}function g(){var e=S.activeColumn.enhancedTable.filter;e.position=null,e.set=[],e.concatType=null,S.filterColumns=_.sortBy(S.filterColumns,function(e){return null==e.enhancedTable.filter.position?1e4:e.enhancedTable.filter.position}),_.each(S.filterColumns,function(e,t){null!=e.enhancedTable.filter.position&&(e.enhancedTable.filter.position=t)}),S.batchMode||d(),y()}function y(){_.each(S.tableColumns,function(e){var t=!0,n=e.enhancedTable.sort.element.parent(),i=e.enhancedTable.sort.element,r=e.enhancedTable.filter.element;if(null!=e.enhancedTable.sort.position){var a="asc"==e.enhancedTable.sort.direction?" - &#9650":" - &#9660";$("#iconText",i).html(e.enhancedTable.sort.position+1),$("#icon",i).html(a)}else t=!1,$("#iconText",i).html(""),$("#icon",i).html("");S.filterDisabled||(null!=e.enhancedTable.filter.position?(t=!0,$("#text",r).text(e.enhancedTable.filter.position+1)):$("#text",r).text("")),t?$(n).addClass("ui-btn-active"):$(n).removeClass("ui-btn-active")})}function b(e){S.batchMode=e||!1}function w(){return S.batchMode}function C(){S.screen.closePopup(S.filterPopupName)}var S={screen:e.contentItem.screen,contentItem:e.contentItem,filterPopupName:e.filterPopupName||"FilterPopup",filterPopupColumnName:e.filterPopupColumnName||"ColumnName",filterPopupOperatorName1:e.filterPopupOperatorName1||"Operator1",filterPopupOperatorName2:e.filterPopupOperatorName2||"Operator2",filterPopupConcatName:e.filterPopupConcatName||"Concat",filterPopupValueName1:e.filterPopupValueName1||"Value1",filterPopupValueName2:e.fitlerPopupValueName2||"Value2",sortString:"",sortColumns:[],filterString:"",filterColumns:[],tableColumns:e.contentItem.children[0].children,visualCollection:e.contentItem._binding.value,dataSourceName:e.contentItem.model.dataSource.member.source.target.source.member.id.split("/")[0],dataTableName:e.contentItem.details._entry.name,element:$(e.element),batchMode:e.batchMode||!1,filterDisabled:e.filterDisabled||!1};return function(){t()}(),{reQuery:d,clearAll:f,clearAllSorts:v,clearAllFilters:m,clearColumnFilter:g,disableFilters:p,setColumnFilter:h,closeFilterPopup:C,setBatchMode:b,getBatchMode:w}};return new t(e)},activateTableHeaderDock:function(e){function t(e){var t=e.lsWire,i=$("td",".ui-page-active").first()[0];if(void 0!=i){var r=2*parseInt($(i).css("padding-left")),a=i.getBoundingClientRect().width;n.cellWidth=a-r;var o=lsWire.getStyleRule(t.styleSheet,".lswire-fixed-element th");o.rule.style.cssText="width: "+t.cellWidth+"px !important; "}}lsWire.changeStyleRule("dynamicCss",".lswire-fixed-element th",{width:"auto"}),e.lsWire=e.lsWire||{};var n=e.lsWire,i=e._view._container[0];if(n.table=i.getElementsByTagName("table")[0],n.tableHead=i.getElementsByTagName("thead")[0],n.styleSheet=lsWire.getStyleSheet("dynamicCss"),n.pageId="#"+e.screen.details._pageId,n.fixed=!1,n[n.pageId+"_catchScroll"]=function(){var i=n.table.getBoundingClientRect();if(0==n.fixed&&i.top<=0){$(n.tableHead).addClass("lswire-fixed-element");var r=$("td",".ui-page-active").first()[0];void 0!=r&&(t(e),n.fixed=!0)}else i.top>0&&1==n.fixed&&($(n.tableHead).removeClass("lswire-fixed-element"),n.fixed=!1)},void 0!=n.table){var r=n.table.getBoundingClientRect();n.originalTop=r.top,n.originalBottom=r.bottom,n.fixed=!1,$(document).on("scroll",n[n.pageId+"_catchScroll"]),$(window).resizeEnd({delay:150},function(){n.table&&t(e)})}},disposeTableHeaderDock:function(e){var t=e.lsWire;t&&void 0!=t[t.pageId+"_catchScroll"]&&($(document).off("scroll",t[t.pageId+"_catchScroll"]),t[t.pageId+"_catchScroll"]=null)},renderHtmlInCustomControl:function(e,t){if(void 0!=e){var n="htmlRenderFor-"+e.name;e.dataBind("_view.isRendered",function(i){if(i){var r=document.createElement("DIV"),a=void 0!=t?t:"lswire-render-html";r.className="ui-input-text ui-shadow-inset ui-corner-all ui-btn-shadow ui-body-a ui-mini "+a,r.id=n,r.innerHTML=e.value,e._view._contentContainer[0].appendChild(r)}}),e.dataBind("_view.isRendered",function(t){t&&e.dataBind("value",function(t){if(void 0==t&&(t=""),e._view.isRendered){var i=e._view._contentContainer[0].querySelector("#"+n);i.innerHTML=t}})})}},changeButtonIcon:function(e,t,n){if(void 0!=e&&void 0!=t&&void 0!=n){var i=e._view._container[0],r=i.getElementsByClassName("ui-icon")[0];r&&(r.classList.remove(t),r.classList.add(n))}},toggleButtonClass:function(e,t){if(void 0!=e&&void 0!=t){var n=e._view._container[0],i=n.getElementsByClassName("ui-icon")[0];i&&i.classList.toggle(t)}},removeButtonClass:function(e,t){if(void 0!=e&&void 0!=t){var n=e._view._container[0],i=n.getElementsByClassName("ui-icon")[0];i&&i.classList.remove(t)}},addButtonClass:function(e,t){if(void 0!=e&&void 0!=t){var n=e._view._container[0],i=n.getElementsByClassName("ui-icon")[0];i&&i.classList.add(t)}},renderButtonAsIcon:function(e,t,n){if(void 0!=e&&void 0!=t){var i=document.createElement("div"),r=document.createElement("span"),a=document.createElement("span"),o=document.createTextNode(e.displayName),l=document.createElement("span");i.className="id-element msls-large-icon ui-btn ui-shadow ui-mini ui-btn-icon-top ui-btn-up-a",i.style.boxShadow="none",i.setAttribute("data-theme","a"),r.className="ui-btn-inner",a.className="ui-btn-text",a.appendChild(o),l.className="ui-icon "+t+" ui-icon-shadow",n=n||!1,1==n?r.appendChild(l):(r.appendChild(a),r.appendChild(l),e.dataBind("displayName",function(e){a.textContent=e})),i.appendChild(r);var s=e._view._container[0];s.replaceChild(i,s.firstChild);var u=lsWire.getParentByClassName(s,"msls-leaf");u.classList.remove("msls-leaf")}},limitNumberOfCharacters:function(e,t,n,i){if(void 0!=e&&void 0!=t){i=i||"{{displayName}} ({{count}} of {{max}} characters left)",n=void 0===n?!0:n,e.dataBind("_view.isRendered",function(a){if(a){("None"===e.properties.attachedLabelPosition||"Hidden"===e.properties.attachedLabelPosition)&&(n=!1);var o=e._view._container[0].getElementsByTagName("label")[0],l=e._view._container[0].getElementsByClassName("id-element")[0],s=e.displayName;e.dataBind("value",function(){if(n){var a=void 0==e.stringValue?0:e.stringValue.length;r(o,s,a,t,i)}}),l.onpaste=function(a){a.preventDefault();var u=void 0;if(window.clipboardData&&window.clipboardData.getData?u=window.clipboardData.getData("Text"):a.clipboardData&&a.clipboardData.getData&&(u=a.clipboardData.getData("text/plain")),e.value=(l.value+u).substring(0,t),n){var c=void 0==e.stringValue?0:e.stringValue.length;r(o,s,c,t,i)}},l.onkeydown=function(e){if(37!==e.keyCode&&38!==e.keyCode&&39!==e.keyCode&&40!==e.keyCode&&9!=e.keyCode){var a=8===e.keyCode?e.target.value.length-1:e.target.value.length+1;if(0>a||a>t&&e.keyCode)return e.preventDefault(),!1;n&&r(o,s,a,t,i)}return!0}}});var r=function(e,t,n,i,r){var a=i-n,o=r.replace("{{displayName}}",t);o=o.replace("{{count}}",a),o=o.replace("{{max}}",i),e.innerText=o}}},enableListToBeMultiSelect:function(e,t,n){function i(t){var n=lsWire.getParentByTagName(t.target,a.itemTagName);void 0!=n&&(t.stopPropagation(),r(e,n),void 0!=e._view.underlyingControl.itemTap&&e._view.underlyingControl.itemTap.execute())}function r(e,t){var n=$.cache[t[$.expando]].data.__entity;if(null===a.totalSelectionsAllowed||a.totalSelectionsAllowed>1)if(t.classList.contains(a.lsWireSelectedClass))e.screen[e.name].selectedItem=null,t.classList.remove(a.lsWireSelectedClass),t.classList.remove("ui-focus"),a.persistSelections&&(n[a.persistId]=!1);else{var i=void 0==a.totalSelectionsAllowed?0:a.listView.querySelectorAll(a.lsWireSelector).length;void 0==a.totalSelectionsAllowed||i<a.totalSelectionsAllowed?(e.screen[e.name].selectedItem=n,t.classList.add(a.lsWireSelectedClass),a.persistSelections&&(n[a.persistId]=!0)):(e.screen[e.name].selectedItem=null,t.classList.remove("ui-focus"),a.persistSelections&&(n[a.persistId]=!1))}else if(t.classList.contains(a.lsWireSelectedClass))e.screen[e.name].selectedItem=null,t.classList.remove(a.lsWireSelectedClass),t.classList.remove("ui-focus"),a.persistSelections&&(n[a.persistId]=!1);else{var r=listView.querySelector(a.lsWireSelector);void 0!=r&&(r.classList.remove(a.lsWireSelectedClass),a.persistSelections&&(n[a.persistId]=!1)),t.classList.add(a.lsWireSelectedClass),e.screen[e.name].selectedItem=n,a.persistSelections&&(n[a.persistId]=!0)}}if(void 0!=e&&null!=e._view&&null!=e._view._container){e.lsWire=e.lsWire||{};var a=e.lsWire,o=e.model.view.id;a.controlClass=":Table"===o?".msls-table tbody":".msls-listview",a.itemTagName=":Table"===o?"tr":"li",a.lsWireSelectedClass="lswire-selected-item",a.lsWireSelector=":Table"===o?"tbody tr.lswire-selected-item":"ul li.lswire-selected-item",a.lsSelector=":Table"===o?"tbody tr.ui-btn-active":"ul li.ui-btn-active",a.listView=e._view._container[0].querySelector(a.controlClass),a.totalSelectionsAllowed=t||null,a.persistId=e.screen.details._modelId+"_Persist"+e.name+"Selections",void 0===lsWire[a.persistId]&&(lsWire[a.persistId]=void 0==n?!1:n),a.persistSelections=lsWire[a.persistId],a.listView.addEventListener("click",i),e.screen.details.pages[0].handleViewDispose(function(){a.listView.removeEventListener("click",i)})}},reselectListItems:function(e,t){if(void 0!=e&&void 0!==e.parent.lsWire){var n=e.parent.lsWire;if(n.persistSelections&&e.value[n.persistId]||t){var i=e._view._container[0];":Table"!==e.parent.model.view.id&&(i=i.parentElement),i.classList.add(n.lsWireSelectedClass),t&&(e.value[n.persistId]=!0)}}},getSelectedListItems:function(e){var t=[];if(void 0!=e&&void 0!==e.lsWire){var n=e.lsWire,i=e._view._container[0].querySelectorAll(n.lsWireSelector);_.forEach(i,function(e){var n=$.cache[e[$.expando]].data.__entity;void 0!==n&&t.push(n)})}return t},selectAllListItems:function(e,t){if(void 0!=e&&void 0!==e.lsWire){var n,i=e.lsWire;if(void 0===t||t===!0){if(void 0===i.totalSelectionsAllowed||null===i.totalSelectionsAllowed){var r=":Table"===e.model.view.id?"tbody tr":"ul li";n=e._view._container[0].querySelectorAll(r),_.forEach(n,function(e){e.classList.contains(i.lsWireSelectedClass)||(e.classList.add(i.lsWireSelectedClass),i.persistSelections&&($.cache[e[$.expando]].data.__entity[i.persistId]=!0))})}}else n=e._view._container[0].querySelectorAll(i.lsWireSelector),_.forEach(n,function(e){e.classList.remove(i.lsWireSelectedClass),e.classList.remove("ui-focus"),i.persistSelections&&($.cache[e[$.expando]].data.__entity[i.persistId]=!1)}),e.screen[e.name].selectedItem=null}},countOfSelectedListItems:function(e){var t=0;return void 0!=e&&void 0!==e.lsWire&&(t=e._view._container[0].querySelectorAll(e.lsWire.lsWireSelector).length),t},totalListSelectionsAllowed:function(e,t){return void 0==e?null:(e.lsWire=e.lsWire||{},void 0!==t&&(e.lsWire.totalSelectionsAllowed=null===t||0===t?null:t),e.lsWire.totalSelectionsAllowed||null)},persistListSelections:function(e,t){function n(e,t){var n=lsWire.list.selected(e);_.forEach(n,function(e){e[i.persistId]=t})}if(void 0==e)return null;e.lsWire=e.lsWire||{};var i=e.lsWire,r=e.screen.details._modelId+"_Persist"+e.name+"Selections";return void 0!==t&&t!==lsWire[r]&&(i.persistSelections=t,lsWire[r]=t,void 0!==i.listView&&n(e,t)),lsWire[r]},reorderTheList:function(e,t){if(void 0!=e&&void 0!=e._view){var n=e._view._contentContainer[0].getElementsByTagName("LI");t=void 0==t?"DisplayOrder":t;for(var i=0;i<n.length;i++)void 0!=n[i]&&void 0!=$(n[i]).data().__entity&&($(n[i]).data().__entity[t]=i+1)}},changeListItemDisplayOrder:function(e,t,n,i){if(void 0!=e&&void 0!=e.value&&void 0!=n&&void 0!=t){var r=e.value;i=void 0==i?"DisplayOrder":i;for(var a=0;a<r.data.length;a++){var o=r.data[a][i];if(o===t[i]+n)return r.data[a][i]=t[i],void(t[i]=o)}}},selectListItem:function(e,t){if(void 0!=e&&void 0!=e.value&&void 0!=t)for(var n=e.value,i=0;i<n.data.length;i++)n.data[i].Id===t&&(n.selectedItem=n.data[i])},selectListItems:function(e,t,n){if(void 0!=e&&void 0!==e.lsWire){var i,r=e.lsWire;if(void 0===n||n===!0){if(void 0===r.totalSelectionsAllowed||null===r.totalSelectionsAllowed){var a=":Table"===e.model.view.id?"tbody tr":"ul li";i=e._view._container[0].querySelectorAll(a),_.forEach(i,function(e){var n=$(e).data().__entity;_.contains(t,n.Id)&&(e.classList.contains(r.lsWireSelectedClass)||(e.classList.add(r.lsWireSelectedClass),r.persistSelections&&($.cache[e[$.expando]].data.__entity[r.persistId]=!0)))})}}else i=e._view._container[0].querySelectorAll(r.lsWireSelector),_.forEach(i,function(e){e.classList.remove(r.lsWireSelectedClass),e.classList.remove("ui-focus"),r.persistSelections&&($.cache[e[$.expando]].data.__entity[r.persistId]=!1)}),e.screen[e.name].selectedItem=null}},renderCheckboxInCustomControl:function(e,t){if(void 0!=e){var n=e.screen.details._modelId,i=e._view._container[0];e.lsWire=e.lsWire||{},e.lsWire.checkbox=e.lsWire.checkbox||{};var r=e.lsWire.checkbox;t=t||{},r.cssClass=t.cssClass||"lswire-checkbox",r.checkedCssClassForText=t.checkedCssClassForText,r.uncheckedCssClassForText=t.uncheckedCssClassForText,r.text=t.text,void 0!==t.initialValue&&(e.value=t.initialValue),r.onChange=t.onChange||function(t){e.isEnabled&&(e.value=t)},r.controlId=n+"-"+e.name,void 0===r.text&&(r.text=void 0==e.description?"None"==e.properties.attachedLabelPosition?e.displayName:"&nbsp;":e.description),r.text=r.text.trim();var a=$('<div class="msls-clear msls-vauto">'),o=$('<input type="checkbox" id="'+r.controlId+'" />'),l=$('<label for="'+r.controlId+'">'+r.text+"</label>");o.appendTo(a),l.appendTo(a),a.appendTo(i),r.cssClass&&$(i).addClass(r.cssClass),_.contains(e.displayName,"&nbsp;")?e._view._container.find(".msls-label label").html("&nbsp;"):""==r.text&&(l[0].innerHTML="&nbsp;",$(i).addClass("noLabelCheckbox")),o.on("click",function(e){e.stopPropagation()}),o.change(function(e){r.onChange(o[0].checked,e)}),r.wrapper=a,$(document).one("pagebeforeshow",function(){lsWire.updateCheckboxTextCssClasses(e)}),e.dataBind("value",function(t){void 0!==t&&(o[0].checked=t,e._view.isRendered&&(o.checkboxradio("refresh"),lsWire.updateCheckboxTextCssClasses(e)))})}},updateCheckboxTextCssClasses:function(e){if(void 0!=e){var t=e.lsWire.checkbox;
void 0==t.btnTextElement&&(t.btnTextElement=$(t.wrapper).parent().find(".ui-btn-text")),e.value?($(t.btnTextElement).removeClass(t.uncheckedCssClassForText),$(t.btnTextElement).addClass(t.checkedCssClassForText)):($(t.btnTextElement).removeClass(t.checkedCssClassForText),$(t.btnTextElement).addClass(t.uncheckedCssClassForText))}},setCheckboxText:function(e,t,n,i){if(void 0!=e&&void 0!=t){var r=e.lsWire.checkbox;void 0==r.btnTextElement&&(r.btnTextElement=$(r.wrapper).parent().find(".ui-btn-text")),r.btnTextElement.length>0&&(r.btnTextElement[0].innerHTML=t,i&&$(r.btnTextElement).removeClass(i),n&&$(r.btnTextElement).addClass(n))}},addCssClassForCheckboxText:function(e,t){if(void 0!=e&&void 0!=t){var n=e.lsWire.checkbox;void 0==n.btnTextElement&&(n.btnTextElement=$(n.wrapper).parent().find(".ui-btn-text")),n.btnTextElement.length>0&&$(n.btnTextElement).addClass(t)}},removeCssClassForCheckboxText:function(e,t){if(void 0!=e&&void 0!=t){var n=e.lsWire.checkbox;void 0==n.btnTextElement&&(n.btnTextElement=$(n.wrapper).parent().find(".ui-btn-text")),n.btnTextElement.length>0&&$(n.btnTextElement).removeClass(t)}},initializeCheckboxCss:function(e,t){void 0!=e&&void 0!=t&&$(document).one("pagebeforeshow",function(){$("div",e).css(t)})},disableCheckbox:function(e,t){if(void 0!=e){var n=e._view._container[0].getElementsByTagName("input")[0];void 0===t&&(t=!0),n.disabled=t,n.parentNode.disabled=t,t?n.parentNode.classList.add("ui-disabled"):n.parentNode.classList.remove("ui-disabled")}},clearDetailsPicker:function(e){void 0!=e&&void 0!=e._view&&($("input",e._view._container[0]).val(null),e.value=null)},cleanDetailsPicker:function(e){void 0!=e&&void 0!=e._view&&null==e.value&&$("input",e._view._container[0]).val(null)},enableDetailsPickerView:function(e,t){setTimeout(function(){$(".ui-icon-searchfield",e._view._container[0]).css("cursor","pointer").on("click",function(n){n.preventDefault(),"INPUT"!=n.target.nodeName&&void 0!=e.value&&myapp[t](e.value)})})},initializeValidator:function(e){var t=e.tab.findItem(e.controlName);t.dataBind("value",function(){e.method(t)})},setValidationError:function(e,t,n){if(void 0!=e&&void 0!=t){var i=e.screen,r=lsWire.getContentItemTab(e),a=r.data.name;e.validationResults=t?null:[new msls.ValidationResult(e.details,n)],lsWire.setTabValidationError(a,i)}},renderEmbedInCustomControl:function(e,t){void 0!=e&&e.dataBind("value",function(n){if(void 0!=n){var i="embed_"+lsWire.createUid(),r="embedContainer_"+i,a=e._view._contentContainer;switch(""==a[0].id&&$(a).attr("id",r),lsWire.getEmbedType(n)){case"iframe":var o=$(n);$(o).attr("id",i),$(o).on("load",null,null,function(){lsWire.fixzIndexAfterEmbedRender()}),void 0==e.embedId?$(a).append(o):$("#"+e.embedId).replaceWith(o),e.embedId=i;break;case"mp4":if(void 0==e.embedId){var l=$('<video controls><source type="video/mp4" src="'+n+'"></video>');$(l).attr("id",i),e.embedId=i,void 0!=t&&t>0&&$(l).height(t).width(1.78*t),$(a).append(l)}}}})},fixzIndexAfterEmbedRender:function(){new Date},resizeEmbed:function(e,t,n){if(void 0!=e&&void 0!=t){var i=e.value;switch(lsWire.getEmbedType(i)){case"iframe":var r=$(i);if(void 0!=n){var a=r[0].height;if(t!=a){var o=t*n,l=r[0].width;r[0].height=t,r[0].width=o,r[0].style.height=t+"px",r[0].style.width=o+"px";var s=r[0].src.split("?");s.length>1&&(s[1]=s[1].replace(a,t).replace(l,o),r[0].src=s[0]+"?"+s[1]),e.value=r[0].outerHTML}}break;case"mp4":void 0!=e.embedId&&$("#"+e.embedId).height(t).width(1.78*t)}}},getEmbedAspectMultiplier:function(e){var t=1.78;if(void 0!=e&&"iframe"==lsWire.getEmbedType(e)){var n=$(e),i=$(n).width(),r=$(n).height(),a=$(n).css("width").replace("px",""),o=$(n).css("height").replace("px",""),l=i==a?i:parseInt(a),s=r==o?r:parseInt(o);t=l/s}return parseFloat(t.toFixed(8))},openEmbedInWindow:function(e){if(void 0!=e)switch(lsWire.getEmbedType(e)){case"iframe":var t=$(e).attr("src");_.contains(t,"youtube")&&_.contains(t,"embed")&&(t=t.replace("embed","v")),window.open(t);break;case"mp4":window.open(e)}},destroyEmbed:function(e){if(void 0!=e){var t=e.value;switch(lsWire.getEmbedType(t)){case"iframe":var n=e._view._container;$(n).remove("iframe");break;case"mp4":}}},getEmbedType:function(e){var t=null;if(void 0!=e){var n=e.toLowerCase();_.contains(n,"iframe")&&(t="iframe"),void 0==t&&_.contains(n,"mp4")&&(t="mp4")}return t},enableListToBeSortable:function(e,t){void 0!=e&&e.dataBind("_visualState",function(n){if("loading"!=n){var i=e._view._container[0];$("ul",i).sortable({update:function(e,n){void 0!=t&&t($(n.item).data().__entity)}}).draggable()}})},toggleListToBeSortable:function(e,t,n,i){void 0!=e&&e.dataBind("_visualState",function(r){if("loading"!=r){{var a=$("ul",e._view._container[0]),o=a.sortable("instance");a.draggable("instance")}void 0==o?(a.sortable({update:function(e,t){void 0!=i&&i($(t.item).data().__entity)}}),e.sortEnabled=!0):a.sortable("option","disabled")?(e.sortEnabled=!0,a.sortable("enable")):(e.sortEnabled=!1,a.sortable("disable")),void 0!=t&&(e.sortEnabled?$("li",a).addClass(t):$("li",a).removeClass(t)),setTimeout(function(){if(void 0!=n){var i=e.screen.findContentItem(n);e.sortEnabled?lsWire.addButtonClass(i,t):lsWire.removeButtonClass(i,t)}},0)}})},toggleSearchInput:function(e,t){if(void 0!=e){var n=lsWire.getActiveScreen()[e];if(void 0!=n&&"object"==typeof n&&void 0!=n.enableSearch){var i=$(".msls-control-search",".ui-page-active");void 0!=i&&(t=void 0!=t?t:$(".msls-listview",".ui-page-active").find("li.ui-first-child").outerWidth(),i.css("max-width")!=t&&i.css("max-width",t),n.enableSearch&&(i.find("input").blur(),$(".ui-page-active").focus()),n.enableSearch=!n.enableSearch)}}},renderFileSelectorInCustomControl:function(e,t,n,i){var r=$('<input name="file" accept="'+n+'" type="file" style="margin-bottom: 10px;" />');$(e).append(r),r.bind("change",function(e){var n=e.target.files;if(1==n.length){var r=new FileReader;r.onload=function(e){var r,a=e.target.result;lsWire.isEmpty(a)?t.value=null:(r=a.split(","),r.length>1&&(t.value=a.split(",")[r.length-1])),void 0!=i&&i(n[0])},r.readAsDataURL(n[0])}else i()})},renderAsMenuTile:function(e,t){t.dataBind("data.Size",function(n){var i=t.data,r=void 0==i.Permission_Id||lsWire.userHasPermission(i.Permission_Id)||lsWire.userHasPermission("SecurityAdministration");t.isVisible=r;var a=$(e).closest("li"),o=2==n?"290px":"140px";a.css({"max-width":o,"min-width":o,background:i.BackgroundColor,color:i.TextColor});var l=$(e).closest("li").find(".msls-ctl-image");void 0==i.Image?l.css("display","none"):l.css({"margin-left":2==i.Size?"100px":"30px","margin-top":"20px"})})},addMenuTile:function(e,t,n){void 0!=myapp.showAddEditTile&&void 0!=myapp.Tile&&void 0!=e&&void 0!=t&&void 0!=n&&myapp.showAddEditTile(null,{beforeShown:function(e){var t=new myapp.Tile;t.MenuId=n,e.Tile=t},afterClosed:function(e,n){"commit"==n&&(t.refresh(),lsWire.tileAdded=!0)}})},executeMenuTileTap:function(e,t,n){var i=e.selectedItem;if(void 0!=t&&t)void 0!=myapp.showAddEditTile&&void 0!=myapp.Tile&&myapp.showAddEditTile(i,{afterClosed:function(e,t){}});else{var r=_.find(n,function(e){return e.Id==i.TileId});void 0!=r&&void 0!=r.Tap&&(void 0!=r.Permission&&lsWire.userHasPermission(r.Permission),r.Tap())}}}}(),function(e){var t,n,i;return i="resizeEnd",n={delay:250},t=function(t,r,a){return"function"==typeof r&&(a=r,r={}),a=a||null,this.element=t,this.settings=e.extend({},n,r),this._defaults=n,this._name=i,this._timeout=!1,this._callback=a,this.init()},t.prototype={init:function(){var t,n;return n=this,t=e(this.element),t.on("resize",function(){return n.initResize()})},getUTCDate:function(e){var t;return e=e||new Date,t=Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())},initResize:function(){var e;return e=this,e.controlTime=e.getUTCDate(),e._timeout===!1?(e._timeout=!0,setTimeout(function(){return e.runCallback(e)},e.settings.delay)):void 0},runCallback:function(e){var t;return t=e.getUTCDate(),t-e.controlTime<e.settings.delay?setTimeout(function(){return e.runCallback(e)},e.settings.delay):(e._timeout=!1,e._callback())}},e.fn[i]=function(n,r){return this.each(function(){return e.data(this,"plugin_"+i)?void 0:e.data(this,"plugin_"+i,new t(this,n,r))})}}(jQuery,window,document),function(e){function t(e,t,n,i,r){this._listener=t,this._isOnce=n,this.context=i,this._signal=e,this._priority=r||0}function n(e,t){if("function"!=typeof e)throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",t))}function i(){this._bindings=[],this._prevParams=null;var e=this;this.dispatch=function(){i.prototype.dispatch.apply(e,arguments)}}t.prototype={active:!0,params:null,execute:function(e){var t,n;return this.active&&this._listener&&(n=this.params?this.params.concat(e):e,t=this._listener.apply(this.context,n),this._isOnce&&this.detach()),t},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},i.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(e,n,i,r){var a,o=this._indexOfListener(e,i);if(-1!==o){if(a=this._bindings[o],a.isOnce()!==n)throw new Error("You cannot add"+(n?"":"Once")+"() then add"+(n?"Once":"")+"() the same listener without removing the relationship first.")}else a=new t(this,e,n,i,r),this._addBinding(a);return this.memorize&&this._prevParams&&a.execute(this._prevParams),a},_addBinding:function(e){var t=this._bindings.length;do--t;while(this._bindings[t]&&e._priority<=this._bindings[t]._priority);this._bindings.splice(t+1,0,e)},_indexOfListener:function(e,t){for(var n,i=this._bindings.length;i--;)if(n=this._bindings[i],n._listener===e&&n.context===t)return i;return-1},has:function(e,t){return-1!==this._indexOfListener(e,t)},add:function(e,t,i){return n(e,"add"),this._registerListener(e,!1,t,i)},addOnce:function(e,t,i){return n(e,"addOnce"),this._registerListener(e,!0,t,i)},remove:function(e,t){n(e,"remove");var i=this._indexOfListener(e,t);return-1!==i&&(this._bindings[i]._destroy(),this._bindings.splice(i,1)),e},removeAll:function(){for(var e=this._bindings.length;e--;)this._bindings[e]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(){if(this.active){var e,t=Array.prototype.slice.call(arguments),n=this._bindings.length;if(this.memorize&&(this._prevParams=t),n){e=this._bindings.slice(),this._shouldPropagate=!0;do n--;while(e[n]&&this._shouldPropagate&&e[n].execute(t)!==!1)}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var r=i;r.Signal=i,"function"==typeof define&&define.amd?define(function(){return r}):"undefined"!=typeof module&&module.exports?module.exports=r:e.signals=r}(this),function(){function e(e,t){if(e!==t){var n=e===e,i=t===t;if(e>t||!n||"undefined"==typeof e&&i)return 1;if(t>e||!i||"undefined"==typeof t&&n)return-1}return 0}function t(e,t,n){if(t!==t)return f(e,n);for(var i=(n||0)-1,r=e.length;++i<r;)if(e[i]===t)return i;return-1}function n(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function i(e){return"string"==typeof e?e:null==e?"":e+""}function r(e){return e.charCodeAt(0)}function a(e,t){for(var n=-1,i=e.length;++n<i&&t.indexOf(e.charAt(n))>-1;);return n}function o(e,t){for(var n=e.length;n--&&t.indexOf(e.charAt(n))>-1;);return n}function l(t,n){return e(t.criteria,n.criteria)||t.index-n.index}function s(t,n){for(var i=-1,r=t.criteria,a=n.criteria,o=r.length;++i<o;){var l=e(r[i],a[i]);if(l)return l}return t.index-n.index}function u(e){return Dt[e]}function c(e){return Vt[e]}function d(e){return"\\"+Mt[e]}function f(e,t,n){for(var i=e.length,r=n?t||i:(t||0)-1;n?r--:++r<i;){var a=e[r];if(a!==a)return r}return-1}function v(e){return e&&"object"==typeof e||!1}function p(e){return 160>=e&&e>=9&&13>=e||32==e||160==e||5760==e||6158==e||e>=8192&&(8202>=e||8232==e||8233==e||8239==e||8287==e||12288==e||65279==e)}function h(e,t){for(var n=-1,i=e.length,r=-1,a=[];++n<i;)e[n]===t&&(e[n]=j,a[++r]=n);return a}function m(e,t){for(var n,i=-1,r=e.length,a=-1,o=[];++i<r;){var l=e[i],s=t?t(l,i,e):l;i&&n===s||(n=s,o[++a]=l)}return o}function g(e){for(var t=-1,n=e.length;++t<n&&p(e.charCodeAt(t)););return t}function y(e){for(var t=e.length;t--&&p(e.charCodeAt(t)););return t}function b(e){return jt[e]}function _(p){function K(e){if(v(e)&&!Ml(e)){if(e instanceof Q)return e;if(qo.call(e,"__wrapped__"))return new Q(e.__wrapped__,e.__chain__,Qt(e.__actions__))}return new Q(e)}function Q(e,t,n){this.__actions__=n||[],this.__chain__=!!t,this.__wrapped__=e}function Z(e){this.actions=null,this.dir=1,this.dropCount=0,this.filtered=!1,this.iteratees=null,this.takeCount=Cl,this.views=null,this.wrapped=e}function Dt(){var e=this.actions,t=this.iteratees,n=this.views,i=new Z(this.wrapped);return i.actions=e?Qt(e):null,i.dir=this.dir,i.dropCount=this.dropCount,i.filtered=this.filtered,i.iteratees=t?Qt(t):null,i.takeCount=this.takeCount,i.views=n?Qt(n):null,i}function Vt(){var e=this.filtered,t=e?new Z(this):this.clone();return t.dir=-1*this.dir,t.filtered=e,t}function jt(){var e=this.wrapped.value();if(!Ml(e))return Kn(e,this.actions);var t=this.dir,n=0>t,i=e.length,r=mi(0,i,this.views),a=r.start,o=r.end,l=this.dropCount,s=ml(o-a,this.takeCount-l),u=n?o:a-1,c=this.iteratees,d=c?c.length:0,f=0,v=[];e:for(;i--&&s>f;){u+=t;for(var p=-1,h=e[u];++p<d;){var m=c[p],g=m.iteratee,y=g(h,u,e),b=m.type;if(b==O)h=y;else if(!y){if(b==R)continue e;break e}}l?l--:v[f++]=h}return n?v.reverse():v}function Ht(){this.__data__={}}function Mt(e){return this.has(e)&&delete this.__data__[e]}function zt(e){return"__proto__"==e?w:this.__data__[e]}function Ft(e){return"__proto__"!=e&&qo.call(this.__data__,e)}function qt(e,t){return"__proto__"!=e&&(this.__data__[e]=t),this}function Kt(e){var t=e?e.length:0;for(this.data={hash:fl(null),set:new al};t--;)this.push(e[t])}function Yt(e,t){var n=e.data,i="string"==typeof t||_a(t)?n.set.has(t):n.hash[t];return i?0:-1}function Gt(e){var t=this.data;"string"==typeof e||_a(e)?t.set.add(e):t.hash[e]=!0}function Qt(e,t){var n=-1,i=e.length;for(t||(t=Eo(i));++n<i;)t[n]=e[n];return t}function Xt(e,t){for(var n=-1,i=e.length;++n<i&&t(e[n],n,e)!==!1;);return e}function Zt(e,t){for(var n=e.length;n--&&t(e[n],n,e)!==!1;);return e}function en(e,t){for(var n=-1,i=e.length;++n<i;)if(!t(e[n],n,e))return!1;return!0}function tn(e,t){for(var n=-1,i=e.length,r=-1,a=[];++n<i;){var o=e[n];t(o,n,e)&&(a[++r]=o)}return a}function nn(e,t){for(var n=-1,i=e.length,r=Eo(i);++n<i;)r[n]=t(e[n],n,e);return r}function rn(e){for(var t=-1,n=e.length,i=wl;++t<n;){var r=e[t];r>i&&(i=r)}return i}function an(e){for(var t=-1,n=e.length,i=Cl;++t<n;){var r=e[t];i>r&&(i=r)}return i}function on(e,t,n,i){var r=-1,a=e.length;for(i&&a&&(n=e[++r]);++r<a;)n=t(n,e[r],r,e);return n}function ln(e,t,n,i){var r=e.length;for(i&&r&&(n=e[--r]);r--;)n=t(n,e[r],r,e);return n}function sn(e,t){for(var n=-1,i=e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}function un(e,t){return"undefined"==typeof e?t:e}function cn(e,t,n,i){return"undefined"!=typeof e&&qo.call(i,n)?e:t}function dn(e,t,n){var i=ql(t);if(!n)return vn(t,e,i);for(var r=-1,a=i.length;++r<a;){var o=i[r],l=e[o],s=n(l,t[o],o,e,t);(s===s?s===l:l!==l)&&("undefined"!=typeof l||o in e)||(e[o]=s)}return e}function fn(e,t){for(var n=-1,i=e.length,r=Si(i),a=t.length,o=Eo(a);++n<a;){var l=t[n];r?(l=parseFloat(l),o[n]=wi(l,i)?e[l]:w):o[n]=e[l]}return o}function vn(e,t,n){n||(n=t,t={});for(var i=-1,r=n.length;++i<r;){var a=n[i];t[a]=e[a]}return t}function pn(e,t){for(var n=-1,i=t.length;++n<i;){var r=t[n];e[r]=ui(e[r],S,e)}return e}function hn(e,t,n){var r=typeof e;return"function"==r?"undefined"!=typeof t&&_i(e)?Gn(e,t,n):e:null==e?wo:"object"==r?Rn(e,!n):Vn(n?i(e):e)}function mn(e,t,n,i,r,a,o){var l;if(n&&(l=r?n(e,i,r):n(e)),"undefined"!=typeof l)return l;if(!_a(e))return e;var s=Ml(e);if(s){if(l=gi(e),!t)return Qt(e,l)}else{var u=Jo.call(e),c=u==q;if(u!=Y&&u!=H&&(!c||r))return Rt[u]?bi(e,u,t):r?e:{};if(l=yi(c?{}:e),!t)return vn(e,l,ql(e))}a||(a=[]),o||(o=[]);for(var d=a.length;d--;)if(a[d]==e)return o[d];return a.push(e),o.push(l),(s?Xt:In)(e,function(i,r){l[r]=mn(i,t,n,r,e,a,o)}),l}function gn(e,t,n,i){if(!ba(e))throw new jo(V);return ol(function(){e.apply(w,Un(n,i))},t)}function yn(e,n){var i=e?e.length:0,r=[];if(!i)return r;var a=-1,o=hi(),l=o==t,s=l&&n.length>=200&&Al(n),u=n.length;s&&(o=Yt,l=!1,n=s);e:for(;++a<i;){var c=e[a];if(l&&c===c){for(var d=u;d--;)if(n[d]===c)continue e;r.push(c)}else o(n,c)<0&&r.push(c)}return r}function bn(e,t){var n=e?e.length:0;if(!Si(n))return In(e,t);for(var i=-1,r=Ai(e);++i<n&&t(r[i],i,r)!==!1;);return e}function _n(e,t){var n=e?e.length:0;if(!Si(n))return $n(e,t);for(var i=Ai(e);n--&&t(i[n],n,i)!==!1;);return e}function wn(e,t){var n=!0;return bn(e,function(e,i,r){return n=!!t(e,i,r)}),n}function Cn(e,t){var n=[];return bn(e,function(e,i,r){t(e,i,r)&&n.push(e)}),n}function Sn(e,t,n,i){var r;return n(e,function(e,n,a){return t(e,n,a)?(r=i?n:e,!1):void 0}),r}function xn(e,t,n,i){for(var r=(i||0)-1,a=e.length,o=-1,l=[];++r<a;){var s=e[r];if(v(s)&&Si(s.length)&&(Ml(s)||fa(s))){t&&(s=xn(s,t,n));var u=-1,c=s.length;for(l.length+=c;++u<c;)l[++o]=s[u]}else n||(l[++o]=s)}return l}function Wn(e,t,n){for(var i=-1,r=Ai(e),a=n(e),o=a.length;++i<o;){var l=a[i];if(t(r[l],l,r)===!1)break}return e}function kn(e,t,n){for(var i=Ai(e),r=n(e),a=r.length;a--;){var o=r[a];if(t(i[o],o,i)===!1)break}return e}function Tn(e,t){return Wn(e,t,Ua)}function In(e,t){return Wn(e,t,ql)}function $n(e,t){return kn(e,t,ql)}function Nn(e,t){for(var n=-1,i=t.length,r=-1,a=[];++n<i;){var o=t[n];ba(e[o])&&(a[++r]=o)}return a}function En(e,t,n){var i=-1,r="function"==typeof t,a=e?e.length:0,o=Si(a)?Eo(a):[];return bn(e,function(e){var a=r?t:null!=e&&e[t];o[++i]=a?a.apply(e,n):w}),o}function An(e,t,n,i,r,a){if(e===t)return 0!==e||1/e==1/t;var o=typeof e,l=typeof t;return"function"!=o&&"object"!=o&&"function"!=l&&"object"!=l||null==e||null==t?e!==e&&t!==t:Pn(e,t,An,n,i,r,a)}function Pn(e,t,n,i,r,a,o){var l=Ml(e),s=Ml(t),u=M,c=M;l||(u=Jo.call(e),u==H?u=Y:u!=Y&&(l=Ia(e))),s||(c=Jo.call(t),c==H?c=Y:c!=Y&&(s=Ia(t)));var d=u==Y,f=c==Y,v=u==c;if(v&&!l&&!d)return di(e,t,u);var p=d&&qo.call(e,"__wrapped__"),h=f&&qo.call(t,"__wrapped__");if(p||h)return n(p?e.value():e,h?t.value():t,i,r,a,o);if(!v)return!1;a||(a=[]),o||(o=[]);for(var m=a.length;m--;)if(a[m]==e)return o[m]==t;a.push(e),o.push(t);var g=(l?ci:fi)(e,t,n,i,r,a,o);return a.pop(),o.pop(),g}function Bn(e,t,n,i,r){var a=t.length;if(null==e)return!a;for(var o=-1,l=!r;++o<a;)if(l&&i[o]?n[o]!==e[t[o]]:!qo.call(e,t[o]))return!1;for(o=-1;++o<a;){var s=t[o];if(l&&i[o])var u=qo.call(e,s);else{var c=e[s],d=n[o];u=r?r(c,d,s):w,"undefined"==typeof u&&(u=An(d,c,r,!0))}if(!u)return!1}return!0}function Ln(e,t){var n=[];return bn(e,function(e,i,r){n.push(t(e,i,r))}),n}function Rn(e,t){var n=ql(e),i=n.length;if(1==i){var r=n[0],a=e[r];if(xi(a))return function(e){return null!=e&&a===e[r]&&qo.call(e,r)}}t&&(e=mn(e,!0));for(var o=Eo(i),l=Eo(i);i--;)a=e[n[i]],o[i]=a,l[i]=xi(a);return function(e){return Bn(e,n,o,l)}}function On(e,t,n,i,r){var a=Si(t.length)&&(Ml(t)||Ia(t));return(a?Xt:In)(t,function(t,o,l){if(v(t))return i||(i=[]),r||(r=[]),Dn(e,l,o,On,n,i,r);var s=e[o],u=n?n(s,t,o,e,l):w,c="undefined"==typeof u;c&&(u=t),!a&&"undefined"==typeof u||!c&&(u===u?u===s:s!==s)||(e[o]=u)}),e}function Dn(e,t,n,i,r,a,o){for(var l=a.length,s=t[n];l--;)if(a[l]==s)return void(e[n]=o[l]);var u=e[n],c=r?r(u,s,n,e,t):w,d="undefined"==typeof c;d&&(c=s,Si(s.length)&&(Ml(s)||Ia(s))?c=Ml(u)?u:u?Qt(u):[]:(zl(s)||fa(s))&&(c=fa(u)?Ea(u):zl(u)?u:{})),a.push(s),o.push(c),d?e[n]=i(c,s,r,a,o):(c===c?c!==u:u===u)&&(e[n]=c)}function Vn(e){return function(t){return null==t?w:t[e]}}function jn(t,n){var i=n.length,r=fn(t,n);for(n.sort(e);i--;){var a=parseFloat(n[i]);if(a!=o&&wi(a)){var o=a;ll.call(t,a,1)}}return r}function Hn(e,t){return e+tl(_l()*(t-e+1))}function Mn(e,t,n,i,r){return r(e,function(e,r,a){n=i?(i=!1,e):t(n,e,r,a)}),n}function Un(e,t,n){var i=-1,r=e.length;t=null==t?0:+t||0,0>t&&(t=-t>r?0:r+t),n="undefined"==typeof n||n>r?r:+n||0,0>n&&(n+=r),r=t>n?0:n-t;for(var a=Eo(r);++i<r;)a[i]=e[i+t];return a}function zn(e,t){var n;return bn(e,function(e,i,r){return n=t(e,i,r),!n}),!!n}function Fn(e,n){var i=-1,r=hi(),a=e.length,o=r==t,l=o&&a>=200,s=l&&Al(),u=[];s?(r=Yt,o=!1):(l=!1,s=n?[]:u);e:for(;++i<a;){var c=e[i],d=n?n(c,i,e):c;if(o&&c===c){for(var f=s.length;f--;)if(s[f]===d)continue e;n&&s.push(d),u.push(c)}else r(s,d)<0&&((n||l)&&s.push(d),u.push(c))}return u}function qn(e,t){for(var n=-1,i=t.length,r=Eo(i);++n<i;)r[n]=e[t[n]];return r}function Kn(e,t){var n=e;n instanceof Z&&(n=n.value());for(var i=-1,r=t.length;++i<r;){var a=[n],o=t[i];il.apply(a,o.args),n=o.func.apply(o.thisArg,a)}return n}function Jn(e,t,n){var i=0,r=e?e.length:i;if("number"==typeof t&&t===t&&Wl>=r){for(;r>i;){var a=i+r>>>1,o=e[a];(n?t>=o:t>o)?i=a+1:r=a}return r}return Yn(e,t,wo,n)}function Yn(e,t,n,i){t=n(t);for(var r=0,a=e?e.length:0,o=t!==t,l="undefined"==typeof t;a>r;){var s=tl((r+a)/2),u=n(e[s]),c=u===u;if(o)var d=c||i;else d=l?c&&(i||"undefined"!=typeof u):i?t>=u:t>u;d?r=s+1:a=s}return ml(a,xl)}function Gn(e,t,n){if("function"!=typeof e)return wo;if("undefined"==typeof t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,i,r){return e.call(t,n,i,r)};case 4:return function(n,i,r,a){return e.call(t,n,i,r,a)};case 5:return function(n,i,r,a,o){return e.call(t,n,i,r,a,o)}}return function(){return e.apply(t,arguments)}}function Qn(e){return Xo.call(e,0)}function Xn(e,t,n){for(var i=n.length,r=-1,a=hl(e.length-i,0),o=-1,l=t.length,s=Eo(a+l);++o<l;)s[o]=t[o];for(;++r<i;)s[n[r]]=e[r];for(;a--;)s[o++]=e[r++];return s}function Zn(e,t,n){for(var i=-1,r=n.length,a=-1,o=hl(e.length-r,0),l=-1,s=t.length,u=Eo(o+s);++a<o;)u[a]=e[a];for(var c=a;++l<s;)u[c+l]=t[l];for(;++i<r;)u[c+n[i]]=e[a++];return u}function ei(e,t){return function(n,i,r){var a=t?t():{};if(i=pi(i,r,3),Ml(n))for(var o=-1,l=n.length;++o<l;){var s=n[o];e(a,s,i(s,o,n),n)}else bn(n,function(t,n,r){e(a,t,i(t,n,r),r)});return a}}function ti(e){return function(){var t=arguments.length,n=arguments[0];if(2>t||null==n)return n;if(t>3&&Ci(arguments[1],arguments[2],arguments[3])&&(t=2),t>3&&"function"==typeof arguments[t-2])var i=Gn(arguments[--t-1],arguments[t--],5);else t>2&&"function"==typeof arguments[t-1]&&(i=arguments[--t]);for(var r=0;++r<t;){var a=arguments[r];a&&e(n,a,i)}return n}}function ni(e,t){function n(){return(this instanceof n?i:e).apply(t,arguments)}var i=ri(e);return n}function ii(e){return function(t){for(var n=-1,i=go(eo(t)),r=i.length,a="";++n<r;)a=e(a,i[n],n);return a}}function ri(e){return function(){var t=Nl(e.prototype),n=e.apply(t,arguments);return _a(n)?n:t}}function ai(e,t){return function(n,i,a){a&&Ci(n,i,a)&&(i=null);var o=pi(),l=null==i;if(o===hn&&l||(l=!1,i=o(i,a,3)),l){var s=Ml(n);if(s||!Ta(n))return e(s?n:Ei(n));i=r}return vi(n,i,t)}}function oi(e,t,n,i,r,a,o,l,s,u){function c(){for(var _=arguments.length,w=_,C=Eo(_);w--;)C[w]=arguments[w];if(i&&(C=Xn(C,i,r)),a&&(C=Zn(C,a,o)),p||g){var W=c.placeholder,k=h(C,W);if(_-=k.length,u>_){var T=l?Qt(l):null,N=hl(u-_,0),E=p?k:null,A=p?null:k,P=p?C:null,B=p?null:C;t|=p?I:$,t&=~(p?$:I),m||(t&=~(S|x));var L=oi(e,t,n,P,E,B,A,T,s,N);return L.placeholder=W,L}}var R=f?n:this;return v&&(e=R[b]),l&&(C=Ii(C,l)),d&&s<C.length&&(C.length=s),(this instanceof c?y||ri(e):e).apply(R,C)}var d=t&E,f=t&S,v=t&x,p=t&k,m=t&W,g=t&T,y=!v&&ri(e),b=e;return c}function li(e,t,n){var r=e.length;if(t=+t,r>=t||!vl(t))return"";var a=t-r;return n=null==n?" ":i(n),so(n,Zo(a/n.length)).slice(0,a)}function si(e,t,n,i){function r(){for(var t=-1,l=arguments.length,s=-1,u=i.length,c=Eo(l+u);++s<u;)c[s]=i[s];for(;l--;)c[s++]=arguments[++t];return(this instanceof r?o:e).apply(a?n:this,c)}var a=t&S,o=ri(e);return r}function ui(e,t,n,i,r,a,o,l){var s=t&x;if(!s&&!ba(e))throw new jo(V);var u=i?i.length:0;if(u||(t&=~(I|$),i=r=null),u-=r?r.length:0,t&$){var c=i,d=r;i=r=null}var f=!s&&Pl(e),v=[e,t,n,i,r,c,d,a,o,l];if(f&&f!==!0&&(Wi(v,f),t=v[1],l=v[9]),v[9]=null==l?s?0:e.length:hl(l-u,0)||0,t==S)var p=ni(v[0],v[2]);else p=t!=I&&t!=(S|I)||v[4].length?oi.apply(null,v):si.apply(null,v);var h=f?El:Bl;return h(p,v)}function ci(e,t,n,i,r,a,o){var l=-1,s=e.length,u=t.length,c=!0;if(s!=u&&!(r&&u>s))return!1;for(;c&&++l<s;){var d=e[l],f=t[l];if(c=w,i&&(c=r?i(f,d,l):i(d,f,l)),"undefined"==typeof c)if(r)for(var v=u;v--&&(f=t[v],!(c=d&&d===f||n(d,f,i,r,a,o))););else c=d&&d===f||n(d,f,i,r,a,o)}return!!c}function di(e,t,n){switch(n){case U:case z:return+e==+t;case F:return e.name==t.name&&e.message==t.message;case J:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case G:case X:return e==i(t)}return!1}function fi(e,t,n,i,r,a,o){var l=ql(e),s=l.length,u=ql(t),c=u.length;if(s!=c&&!r)return!1;for(var d,f=-1;++f<s;){var v=l[f],p=qo.call(t,v);if(p){var h=e[v],m=t[v];p=w,i&&(p=r?i(m,h,v):i(h,m,v)),"undefined"==typeof p&&(p=h&&h===m||n(h,m,i,r,a,o))}if(!p)return!1;d||(d="constructor"==v)}if(!d){var g=e.constructor,y=t.constructor;if(g!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof g&&g instanceof g&&"function"==typeof y&&y instanceof y))return!1}return!0}function vi(e,t,n){var i=n?Cl:wl,r=i,a=r;return bn(e,function(e,o,l){var s=t(e,o,l);((n?r>s:s>r)||s===i&&s===a)&&(r=s,a=e)}),a}function pi(e,t,n){var i=K.callback||bo;return i=i===bo?hn:i,n?i(e,t,n):i}function hi(e,n,i){var r=K.indexOf||Fi;return r=r===Fi?t:r,e?r(e,n,i):r}function mi(e,t,n){for(var i=-1,r=n?n.length:0;++i<r;){var a=n[i],o=a.size;switch(a.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=ml(t,e+o);break;case"takeRight":e=hl(e,t-o)}}return{start:e,end:t}}function gi(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&qo.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function yi(e){var t=e.constructor;return"function"==typeof t&&t instanceof t||(t=Oo),new t}function bi(e,t,n){var i=e.constructor;switch(t){case et:return Qn(e);case U:case z:return new i(+e);case tt:case nt:case it:case rt:case at:case ot:case lt:case st:case ut:var r=e.buffer;return new i(n?Qn(r):r,e.byteOffset,e.length);case J:case X:return new i(e);case G:var a=new i(e.source,wt.exec(e));a.lastIndex=e.lastIndex}return a}function _i(e){var t=K.support,n=!(t.funcNames?e.name:t.funcDecomp);if(!n){var i=zo.call(e);t.funcNames||(n=!Ct.test(i)),n||(n=$t.test(i)||Sa(e),El(e,n))}return n}function wi(e,t){return e=+e,t=null==t?Tl:t,e>-1&&e%1==0&&t>e}function Ci(e,t,n){if(!_a(n))return!1;var i=typeof t;if("number"==i)var r=n.length,a=Si(r)&&wi(t,r);else a="string"==i&&t in e;return a&&n[t]===e}function Si(e){return"number"==typeof e&&e>-1&&e%1==0&&Tl>=e}function xi(e){return e===e&&(0===e?1/e>0:!_a(e))}function Wi(e,t){var n=e[1],i=t[1],r=n|i,a=E|N,o=S|x,l=a|o|W|T,s=n&E&&!(i&E),u=n&N&&!(i&N),c=(u?e:t)[7],d=(s?e:t)[8],f=!(n>=N&&i>o||n>o&&i>=N),v=r>=a&&l>=r&&(N>n||(u||s)&&c.length<=d);if(!f&&!v)return e;i&S&&(e[2]=t[2],r|=n&S?0:W);var p=t[3];if(p){var m=e[3];e[3]=m?Xn(m,p,t[4]):Qt(p),e[4]=m?h(e[3],j):Qt(t[4])}return p=t[5],p&&(m=e[5],e[5]=m?Zn(m,p,t[6]):Qt(p),e[6]=m?h(e[5],j):Qt(t[6])),p=t[7],p&&(e[7]=Qt(p)),i&E&&(e[8]=null==e[8]?t[8]:ml(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=r,e}function ki(e,t){e=Ai(e);for(var n=-1,i=t.length,r={};++n<i;){var a=t[n];a in e&&(r[a]=e[a])}return r}function Ti(e,t){var n={};return Tn(e,function(e,i,r){t(e,i,r)&&(n[i]=e)}),n}function Ii(e,t){for(var n=e.length,i=ml(t.length,n),r=Qt(e);i--;){var a=t[i];e[i]=wi(a,n)?r[a]:w}return e}function $i(e){{var t;K.support}if(!v(e)||Jo.call(e)!=Y||!qo.call(e,"constructor")&&(t=e.constructor,"function"==typeof t&&!(t instanceof t)))return!1;var n;return Tn(e,function(e,t){n=t}),"undefined"==typeof n||qo.call(e,n)}function Ni(e){for(var t=Ua(e),n=t.length,i=n&&e.length,r=K.support,a=i&&Si(i)&&(Ml(e)||r.nonEnumArgs&&fa(e)),o=-1,l=[];++o<n;){var s=t[o];(a&&wi(s,i)||qo.call(e,s))&&l.push(s)}return l}function Ei(e){return null==e?[]:Si(e.length)?_a(e)?e:Oo(e):Ga(e)}function Ai(e){return _a(e)?e:Oo(e)}function Pi(e,t,n){t=(n?Ci(e,t,n):null==t)?1:hl(+t||1,1);for(var i=0,r=e?e.length:0,a=-1,o=Eo(Zo(r/t));r>i;)o[++a]=Un(e,i,i+=t);return o}function Bi(e){for(var t=-1,n=e?e.length:0,i=-1,r=[];++t<n;){var a=e[t];a&&(r[++i]=a)}return r}function Li(){for(var e=-1,t=arguments.length;++e<t;){var n=arguments[e];if(Ml(n)||fa(n))break}return yn(n,xn(arguments,!1,!0,++e))}function Ri(e,t,n){var i=e?e.length:0;return i?((n?Ci(e,t,n):null==t)&&(t=1),Un(e,0>t?0:t)):[]}function Oi(e,t,n){var i=e?e.length:0;return i?((n?Ci(e,t,n):null==t)&&(t=1),t=i-(+t||0),Un(e,0,0>t?0:t)):[]}function Di(e,t,n){var i=e?e.length:0;if(!i)return[];for(t=pi(t,n,3);i--&&t(e[i],i,e););return Un(e,0,i+1)}function Vi(e,t,n){var i=e?e.length:0;if(!i)return[];var r=-1;for(t=pi(t,n,3);++r<i&&t(e[r],r,e););return Un(e,r)}function ji(e,t,n){var i=-1,r=e?e.length:0;for(t=pi(t,n,3);++i<r;)if(t(e[i],i,e))return i;return-1}function Hi(e,t,n){var i=e?e.length:0;for(t=pi(t,n,3);i--;)if(t(e[i],i,e))return i;return-1}function Mi(e){return e?e[0]:w}function Ui(e,t,n){var i=e?e.length:0;return n&&Ci(e,t,n)&&(t=!1),i?xn(e,t):[]}function zi(e){var t=e?e.length:0;return t?xn(e,!0):[]}function Fi(e,n,i){var r=e?e.length:0;if(!r)return-1;if("number"==typeof i)i=0>i?hl(r+i,0):i||0;else if(i){var a=Jn(e,n),o=e[a];return(n===n?n===o:o!==o)?a:-1}return t(e,n,i)}function qi(e){return Oi(e,1)}function Ki(){for(var e=[],n=-1,i=arguments.length,r=[],a=hi(),o=a==t;++n<i;){var l=arguments[n];(Ml(l)||fa(l))&&(e.push(l),r.push(o&&l.length>=120&&Al(n&&l)))}i=e.length;var s=e[0],u=-1,c=s?s.length:0,d=[],f=r[0];e:for(;++u<c;)if(l=s[u],(f?Yt(f,l):a(d,l))<0){for(n=i;--n;){var v=r[n];if((v?Yt(v,l):a(e[n],l))<0)continue e}f&&f.push(l),d.push(l)}return d}function Ji(e){var t=e?e.length:0;return t?e[t-1]:w}function Yi(e,t,n){var i=e?e.length:0;if(!i)return-1;var r=i;if("number"==typeof n)r=(0>n?hl(i+n,0):ml(n||0,i-1))+1;else if(n){r=Jn(e,t,!0)-1;var a=e[r];return(t===t?t===a:a!==a)?r:-1}if(t!==t)return f(e,r,!0);for(;r--;)if(e[r]===t)return r;return-1}function Gi(){var e=arguments[0];if(!e||!e.length)return e;for(var t=0,n=hi(),i=arguments.length;++t<i;)for(var r=0,a=arguments[t];(r=n(e,a,r))>-1;)ll.call(e,r,1);return e}function Qi(e){return jn(e||[],xn(arguments,!1,!1,1))}function Xi(e,t,n){var i=-1,r=e?e.length:0,a=[];for(t=pi(t,n,3);++i<r;){var o=e[i];t(o,i,e)&&(a.push(o),ll.call(e,i--,1),r--)}return a}function Zi(e){return Ri(e,1)}function er(e,t,n){var i=e?e.length:0;return i?(n&&"number"!=typeof n&&Ci(e,t,n)&&(t=0,n=i),Un(e,t,n)):[]}function tr(e,t,n,i){var r=pi(n);return r===hn&&null==n?Jn(e,t):Yn(e,t,r(n,i,1))}function nr(e,t,n,i){var r=pi(n);return r===hn&&null==n?Jn(e,t,!0):Yn(e,t,r(n,i,1),!0)}function ir(e,t,n){var i=e?e.length:0;return i?((n?Ci(e,t,n):null==t)&&(t=1),Un(e,0,0>t?0:t)):[]}function rr(e,t,n){var i=e?e.length:0;return i?((n?Ci(e,t,n):null==t)&&(t=1),t=i-(+t||0),Un(e,0>t?0:t)):[]}function ar(e,t,n){var i=e?e.length:0;if(!i)return[];for(t=pi(t,n,3);i--&&t(e[i],i,e););return Un(e,i+1)}function or(e,t,n){var i=e?e.length:0;if(!i)return[];var r=-1;for(t=pi(t,n,3);++r<i&&t(e[r],r,e););return Un(e,0,r)}function lr(){return Fn(xn(arguments,!1,!0))}function sr(e,n,i,r){var a=e?e.length:0;if(!a)return[];"boolean"!=typeof n&&null!=n&&(r=i,i=Ci(e,n,r)?null:n,n=!1);var o=pi();return(o!==hn||null!=i)&&(i=o(i,r,3)),n&&hi()==t?m(e,i):Fn(e,i)}function ur(e){for(var t=-1,n=(e&&e.length&&rn(nn(e,Fo)))>>>0,i=Eo(n);++t<n;)i[t]=nn(e,Vn(t));
return i}function cr(e){return yn(e,Un(arguments,1))}function dr(){for(var e=-1,t=arguments.length;++e<t;){var n=arguments[e];if(Ml(n)||fa(n))var i=i?yn(i,n).concat(yn(n,i)):n}return i?Fn(i):[]}function fr(){for(var e=arguments.length,t=Eo(e);e--;)t[e]=arguments[e];return ur(t)}function vr(e,t){var n=-1,i=e?e.length:0,r={};for(!i||t||Ml(e[0])||(t=[]);++n<i;){var a=e[n];t?r[a]=t[n]:a&&(r[a[0]]=a[1])}return r}function pr(e){var t=K(e);return t.__chain__=!0,t}function hr(e,t,n){return t.call(n,e),e}function mr(e,t,n){return t.call(n,e)}function gr(){return pr(this)}function yr(){var e=this.__wrapped__;return e instanceof Z?new Q(e.reverse()):this.thru(function(e){return e.reverse()})}function br(){return this.value()+""}function _r(){return Kn(this.__wrapped__,this.__actions__)}function wr(e){var t=e?e.length:0;return Si(t)&&(e=Ei(e)),fn(e,xn(arguments,!1,!1,1))}function Cr(e,t,n){var i=e?e.length:0;return Si(i)||(e=Ga(e),i=e.length),i?(n="number"==typeof n?0>n?hl(i+n,0):n||0:0,"string"==typeof e||!Ml(e)&&Ta(e)?i>n&&e.indexOf(t,n)>-1:hi(e,t,n)>-1):!1}function Sr(e,t,n){var i=Ml(e)?en:wn;return("function"!=typeof t||"undefined"!=typeof n)&&(t=pi(t,n,3)),i(e,t)}function xr(e,t,n){var i=Ml(e)?tn:Cn;return t=pi(t,n,3),i(e,t)}function Wr(e,t,n){if(Ml(e)){var i=ji(e,t,n);return i>-1?e[i]:w}return t=pi(t,n,3),Sn(e,t,bn)}function kr(e,t,n){return t=pi(t,n,3),Sn(e,t,_n)}function Tr(e,t){return Wr(e,Co(t))}function Ir(e,t,n){return"function"==typeof t&&"undefined"==typeof n&&Ml(e)?Xt(e,t):bn(e,Gn(t,n,3))}function $r(e,t,n){return"function"==typeof t&&"undefined"==typeof n&&Ml(e)?Zt(e,t):_n(e,Gn(t,n,3))}function Nr(e,t){return En(e,t,Un(arguments,2))}function Er(e,t,n){var i=Ml(e)?nn:Ln;return t=pi(t,n,3),i(e,t)}function Ar(e,t){return Er(e,ko(t))}function Pr(e,t,n,i){var r=Ml(e)?on:Mn;return r(e,pi(t,i,4),n,arguments.length<3,bn)}function Br(e,t,n,i){var r=Ml(e)?ln:Mn;return r(e,pi(t,i,4),n,arguments.length<3,_n)}function Lr(e,t,n){var i=Ml(e)?tn:Cn;return t=pi(t,n,3),i(e,function(e,n,i){return!t(e,n,i)})}function Rr(e,t,n){if(n?Ci(e,t,n):null==t){e=Ei(e);var i=e.length;return i>0?e[Hn(0,i-1)]:w}var r=Or(e);return r.length=ml(0>t?0:+t||0,r.length),r}function Or(e){e=Ei(e);for(var t=-1,n=e.length,i=Eo(n);++t<n;){var r=Hn(0,t);t!=r&&(i[t]=i[r]),i[r]=e[t]}return i}function Dr(e){var t=e?e.length:0;return Si(t)?t:ql(e).length}function Vr(e,t,n){var i=Ml(e)?sn:zn;return("function"!=typeof t||"undefined"!=typeof n)&&(t=pi(t,n,3)),i(e,t)}function jr(e,t,i){var r=-1,a=e?e.length:0,o=Si(a)?Eo(a):[];return i&&Ci(e,t,i)&&(t=null),t=pi(t,i,3),bn(e,function(e,n,i){o[++r]={criteria:t(e,n,i),index:r,value:e}}),n(o,l)}function Hr(e){var t=arguments;t.length>3&&Ci(t[1],t[2],t[3])&&(t=[e,t[1]]);var i=-1,r=e?e.length:0,a=xn(t,!1,!1,1),o=Si(r)?Eo(r):[];return bn(e,function(e){for(var t=a.length,n=Eo(t);t--;)n[t]=null==e?w:e[a[t]];o[++i]={criteria:n,index:i,value:e}}),n(o,s)}function Mr(e,t){return xr(e,Co(t))}function Ur(e,t){if(!ba(t)){if(!ba(e))throw new jo(V);var n=e;e=t,t=n}return e=vl(e=+e)?e:0,function(){return--e<1?t.apply(this,arguments):void 0}}function zr(e,t,n){return n&&Ci(e,t,n)&&(t=null),t=null==t?e.length:+t||0,ui(e,E,null,null,null,null,t)}function Fr(e,t){var n;if(!ba(t)){if(!ba(e))throw new jo(V);var i=e;e=t,t=i}return function(){return--e>0?n=t.apply(this,arguments):t=null,n}}function qr(e,t){var n=S;if(arguments.length>2){var i=Un(arguments,2),r=h(i,qr.placeholder);n|=I}return ui(e,n,t,i,r)}function Kr(e){return pn(e,arguments.length>1?xn(arguments,!1,!1,1):ja(e))}function Jr(e,t){var n=S|x;if(arguments.length>2){var i=Un(arguments,2),r=h(i,Jr.placeholder);n|=I}return ui(t,n,e,i,r)}function Yr(e,t,n){n&&Ci(e,t,n)&&(t=null);var i=ui(e,k,null,null,null,null,null,t);return i.placeholder=Yr.placeholder,i}function Gr(e,t,n){n&&Ci(e,t,n)&&(t=null);var i=ui(e,T,null,null,null,null,null,t);return i.placeholder=Gr.placeholder,i}function Qr(e,t,n){function i(){f&&el(f),s&&el(s),s=f=v=w}function r(){var n=t-(Hl()-c);if(0>=n||n>t){s&&el(s);var i=v;s=f=v=w,i&&(p=Hl(),u=e.apply(d,l),f||s||(l=d=null))}else f=ol(r,n)}function a(){f&&el(f),s=f=v=w,(m||h!==t)&&(p=Hl(),u=e.apply(d,l),f||s||(l=d=null))}function o(){if(l=arguments,c=Hl(),d=this,v=m&&(f||!g),h===!1)var n=g&&!f;else{s||g||(p=c);var i=h-(c-p),o=0>=i||i>h;o?(s&&(s=el(s)),p=c,u=e.apply(d,l)):s||(s=ol(a,i))}return o&&f?f=el(f):f||t===h||(f=ol(r,t)),n&&(o=!0,u=e.apply(d,l)),!o||f||s||(l=d=null),u}var l,s,u,c,d,f,v,p=0,h=!1,m=!0;if(!ba(e))throw new jo(V);if(t=0>t?0:t,n===!0){var g=!0;m=!1}else _a(n)&&(g=n.leading,h="maxWait"in n&&hl(+n.maxWait||0,t),m="trailing"in n?n.trailing:m);return o.cancel=i,o}function Xr(e){return gn(e,1,arguments,1)}function Zr(e,t){return gn(e,t,arguments,2)}function ea(){var e=arguments,t=e.length;if(!t)return function(){};if(!en(e,ba))throw new jo(V);return function(){for(var n=0,i=e[n].apply(this,arguments);++n<t;)i=e[n].call(this,i);return i}}function ta(){var e=arguments,t=e.length-1;if(0>t)return function(){};if(!en(e,ba))throw new jo(V);return function(){for(var n=t,i=e[n].apply(this,arguments);n--;)i=e[n].call(this,i);return i}}function na(e,t){if(!ba(e)||t&&!ba(t))throw new jo(V);var n=function(){var i=n.cache,r=t?t.apply(this,arguments):arguments[0];if(i.has(r))return i.get(r);var a=e.apply(this,arguments);return i.set(r,a),a};return n.cache=new na.Cache,n}function ia(e){if(!ba(e))throw new jo(V);return function(){return!e.apply(this,arguments)}}function ra(e){return Fr(e,2)}function aa(e){var t=Un(arguments,1),n=h(t,aa.placeholder);return ui(e,I,null,t,n)}function oa(e){var t=Un(arguments,1),n=h(t,oa.placeholder);return ui(e,$,null,t,n)}function la(e){var t=xn(arguments,!1,!1,1);return ui(e,N,null,null,null,t)}function sa(e,t,n){var i=!0,r=!0;if(!ba(e))throw new jo(V);return n===!1?i=!1:_a(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),Ot.leading=i,Ot.maxWait=+t,Ot.trailing=r,Qr(e,t,Ot)}function ua(e,t){return t=null==t?wo:t,ui(t,I,null,[e],[])}function ca(e,t,n,i){return"boolean"!=typeof t&&null!=t&&(i=n,n=Ci(e,t,i)?null:t,t=!1),n="function"==typeof n&&Gn(n,i,1),mn(e,t,n)}function da(e,t,n){return t="function"==typeof t&&Gn(t,n,1),mn(e,!0,t)}function fa(e){var t=v(e)?e.length:w;return Si(t)&&Jo.call(e)==H||!1}function va(e){return e===!0||e===!1||v(e)&&Jo.call(e)==U||!1}function pa(e){return v(e)&&Jo.call(e)==z||!1}function ha(e){return e&&1===e.nodeType&&v(e)&&Jo.call(e).indexOf("Element")>-1||!1}function ma(e){if(null==e)return!0;var t=e.length;return Si(t)&&(Ml(e)||Ta(e)||fa(e)||v(e)&&ba(e.splice))?!t:!ql(e).length}function ga(e,t,n,i){if(n="function"==typeof n&&Gn(n,i,3),!n&&xi(e)&&xi(t))return e===t;var r=n?n(e,t):w;return"undefined"==typeof r?An(e,t,n):!!r}function ya(e){return v(e)&&"string"==typeof e.message&&Jo.call(e)==F||!1}function ba(e){return"function"==typeof e||!1}function _a(e){var t=typeof e;return"function"==t||e&&"object"==t||!1}function wa(e,t,n,i){var r=ql(t),a=r.length;if(n="function"==typeof n&&Gn(n,i,3),!n&&1==a){var o=r[0],l=t[o];if(xi(l))return null!=e&&l===e[o]&&qo.call(e,o)}for(var s=Eo(a),u=Eo(a);a--;)l=s[a]=t[r[a]],u[a]=xi(l);return Bn(e,r,s,u,n)}function Ca(e){return Wa(e)&&e!=+e}function Sa(e){return null==e?!1:Jo.call(e)==q?Go.test(zo.call(e)):v(e)&&xt.test(e)||!1}function xa(e){return null===e}function Wa(e){return"number"==typeof e||v(e)&&Jo.call(e)==J||!1}function ka(e){return v(e)&&Jo.call(e)==G||!1}function Ta(e){return"string"==typeof e||v(e)&&Jo.call(e)==X||!1}function Ia(e){return v(e)&&Si(e.length)&&Lt[Jo.call(e)]||!1}function $a(e){return"undefined"==typeof e}function Na(e){var t=e?e.length:0;return Si(t)?t?Qt(e):[]:Ga(e)}function Ea(e){return vn(e,Ua(e))}function Aa(e,t,n){var i=Nl(e);return n&&Ci(e,t,n)&&(t=null),t?vn(t,i,ql(t)):i}function Pa(e){if(null==e)return e;var t=Qt(arguments);return t.push(un),Fl.apply(w,t)}function Ba(e,t,n){return t=pi(t,n,3),Sn(e,t,In,!0)}function La(e,t,n){return t=pi(t,n,3),Sn(e,t,$n,!0)}function Ra(e,t,n){return("function"!=typeof t||"undefined"!=typeof n)&&(t=Gn(t,n,3)),Wn(e,t,Ua)}function Oa(e,t,n){return t=Gn(t,n,3),kn(e,t,Ua)}function Da(e,t,n){return("function"!=typeof t||"undefined"!=typeof n)&&(t=Gn(t,n,3)),In(e,t)}function Va(e,t,n){return t=Gn(t,n,3),kn(e,t,ql)}function ja(e){return Nn(e,Ua(e))}function Ha(e,t){return e?qo.call(e,t):!1}function Ma(e,t,n){n&&Ci(e,t,n)&&(t=null);for(var i=-1,r=ql(e),a=r.length,o={};++i<a;){var l=r[i],s=e[l];t?qo.call(o,s)?o[s].push(l):o[s]=[l]:o[s]=l}return o}function Ua(e){if(null==e)return[];_a(e)||(e=Oo(e));var t=e.length;t=t&&Si(t)&&(Ml(e)||$l.nonEnumArgs&&fa(e))&&t||0;for(var n=e.constructor,i=-1,r="function"==typeof n&&n.prototype==e,a=Eo(t),o=t>0;++i<t;)a[i]=i+"";for(var l in e)o&&wi(l,t)||"constructor"==l&&(r||!qo.call(e,l))||a.push(l);return a}function za(e,t,n){var i={};return t=pi(t,n,3),In(e,function(e,n,r){i[n]=t(e,n,r)}),i}function Fa(e,t,n){if(null==e)return{};if("function"!=typeof t){var i=nn(xn(arguments,!1,!1,1),Vo);return ki(e,yn(Ua(e),i))}return t=Gn(t,n,3),Ti(e,function(e,n,i){return!t(e,n,i)})}function qa(e){for(var t=-1,n=ql(e),i=n.length,r=Eo(i);++t<i;){var a=n[t];r[t]=[a,e[a]]}return r}function Ka(e,t,n){return null==e?{}:"function"==typeof t?Ti(e,Gn(t,n,3)):ki(e,xn(arguments,!1,!1,1))}function Ja(e,t,n){var i=null==e?w:e[t];return"undefined"==typeof i&&(i=n),ba(i)?i.call(e):i}function Ya(e,t,n,i){var r=Ml(e)||Ia(e);if(t=pi(t,i,4),null==n)if(r||_a(e)){var a=e.constructor;n=r?Ml(e)?new a:[]:Nl("function"==typeof a&&a.prototype)}else n={};return(r?Xt:In)(e,function(e,i,r){return t(n,e,i,r)}),n}function Ga(e){return qn(e,ql(e))}function Qa(e){return qn(e,Ua(e))}function Xa(e,t,n){n&&Ci(e,t,n)&&(t=n=null);var i=null==e,r=null==t;if(null==n&&(r&&"boolean"==typeof e?(n=e,e=1):"boolean"==typeof t&&(n=t,r=!0)),i&&r&&(t=1,r=!1),e=+e||0,r?(t=e,e=0):t=+t||0,n||e%1||t%1){var a=_l();return ml(e+a*(t-e+parseFloat("1e-"+((a+"").length-1))),t)}return Hn(e,t)}function Za(e){return e=i(e),e&&e.charAt(0).toUpperCase()+e.slice(1)}function eo(e){return e=i(e),e&&e.replace(Wt,u)}function to(e,t,n){e=i(e),t+="";var r=e.length;return n=("undefined"==typeof n?r:ml(0>n?0:+n||0,r))-t.length,n>=0&&e.indexOf(t,n)==n}function no(e){return e=i(e),e&&mt.test(e)?e.replace(pt,c):e}function io(e){return e=i(e),e&&It.test(e)?e.replace(Tt,"\\$&"):e}function ro(e,t,n){e=i(e),t=+t;var r=e.length;if(r>=t||!vl(t))return e;var a=(t-r)/2,o=tl(a),l=Zo(a);return n=li("",l,n),n.slice(0,o)+e+n}function ao(e,t,n){return e=i(e),e&&li(e,t,n)+e}function oo(e,t,n){return e=i(e),e&&e+li(e,t,n)}function lo(e,t,n){return n&&Ci(e,t,n)&&(t=0),bl(e,t)}function so(e,t){var n="";if(e=i(e),t=+t,1>t||!e||!vl(t))return n;do t%2&&(n+=e),t=tl(t/2),e+=e;while(t);return n}function uo(e,t,n){return e=i(e),n=null==n?0:ml(0>n?0:+n||0,e.length),e.lastIndexOf(t,n)==n}function co(e,t,n){var r=K.templateSettings;n&&Ci(e,t,n)&&(t=n=null),e=i(e),t=dn(dn({},n||t),r,cn);var a,o,l=dn(dn({},t.imports),r.imports,cn),s=ql(l),u=qn(l,s),c=0,f=t.interpolate||kt,v="__p += '",p=Do((t.escape||kt).source+"|"+f.source+"|"+(f===bt?_t:kt).source+"|"+(t.evaluate||kt).source+"|$","g"),h="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++Bt+"]")+"\n";e.replace(p,function(t,n,i,r,l,s){return i||(i=r),v+=e.slice(c,s).replace(Nt,d),n&&(a=!0,v+="' +\n__e("+n+") +\n'"),l&&(o=!0,v+="';\n"+l+";\n__p += '"),i&&(v+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),c=s+t.length,t}),v+="';\n";var m=t.variable;m||(v="with (obj) {\n"+v+"\n}\n"),v=(o?v.replace(ct,""):v).replace(dt,"$1").replace(ft,"$1;"),v="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+v+"return __p\n}";var g=yo(function(){return Bo(s,h+"return "+v).apply(w,u)});if(g.source=v,ya(g))throw g;return g}function fo(e,t,n){var r=e;return(e=i(e))?(n?Ci(r,t,n):null==t)?e.slice(g(e),y(e)+1):(t=i(t),e.slice(a(e,t),o(e,t)+1)):e}function vo(e,t,n){var r=e;return e=i(e),e?e.slice((n?Ci(r,t,n):null==t)?g(e):a(e,i(t))):e}function po(e,t,n){var r=e;return e=i(e),e?(n?Ci(r,t,n):null==t)?e.slice(0,y(e)+1):e.slice(0,o(e,i(t))+1):e}function ho(e,t,n){n&&Ci(e,t,n)&&(t=null);var r=A,a=P;if(null!=t)if(_a(t)){var o="separator"in t?t.separator:o;r="length"in t?+t.length||0:r,a="omission"in t?i(t.omission):a}else r=+t||0;if(e=i(e),r>=e.length)return e;var l=r-a.length;if(1>l)return a;var s=e.slice(0,l);if(null==o)return s+a;if(ka(o)){if(e.slice(l).search(o)){var u,c,d=e.slice(0,l);for(o.global||(o=Do(o.source,(wt.exec(o)||"")+"g")),o.lastIndex=0;u=o.exec(d);)c=u.index;s=s.slice(0,null==c?l:c)}}else if(e.indexOf(o,l)!=l){var f=s.lastIndexOf(o);f>-1&&(s=s.slice(0,f))}return s+a}function mo(e){return e=i(e),e&&ht.test(e)?e.replace(vt,b):e}function go(e,t,n){return n&&Ci(e,t,n)&&(t=null),e=i(e),e.match(t||Et)||[]}function yo(e){try{return e()}catch(t){return ya(t)?t:Po(t)}}function bo(e,t,n){return n&&Ci(e,t,n)&&(t=null),hn(e,t)}function _o(e){return function(){return e}}function wo(e){return e}function Co(e){return Rn(e,!0)}function So(e,t,n){if(null==n){var i=_a(t),r=i&&ql(t),a=r&&r.length&&Nn(t,r);(a?a.length:i)||(a=!1,n=t,t=e,e=this)}a||(a=Nn(t,ql(t)));var o=!0,l=-1,s=ba(e),u=a.length;n===!1?o=!1:_a(n)&&"chain"in n&&(o=n.chain);for(;++l<u;){var c=a[l],d=t[c];e[c]=d,s&&(e.prototype[c]=function(t){return function(){var n=this.__chain__;if(o||n){var i=e(this.__wrapped__);return(i.__actions__=Qt(this.__actions__)).push({func:t,args:arguments,thisArg:e}),i.__chain__=n,i}var r=[this.value()];return il.apply(r,arguments),t.apply(e,r)}}(d))}return e}function xo(){return p._=Yo,this}function Wo(){}function ko(e){return Vn(e+"")}function To(e){return function(t){return null==e?w:e[t]}}function Io(e,t,n){n&&Ci(e,t,n)&&(t=n=null),e=+e||0,n=null==n?1:+n||0,null==t?(t=e,e=0):t=+t||0;for(var i=-1,r=hl(Zo((t-e)/(n||1)),0),a=Eo(r);++i<r;)a[i]=e,e+=n;return a}function $o(e,t,n){if(e=+e,1>e||!vl(e))return[];var i=-1,r=Eo(ml(e,Sl));for(t=Gn(t,n,1);++i<e;)Sl>i?r[i]=t(i):t(i);return r}function No(e){var t=++Ko;return i(e)+t}p=p?Jt.defaults(Ut.Object(),p,Jt.pick(Ut,Pt)):Ut;var Eo=p.Array,Ao=p.Date,Po=p.Error,Bo=p.Function,Lo=p.Math,Ro=p.Number,Oo=p.Object,Do=p.RegExp,Vo=p.String,jo=p.TypeError,Ho=Eo.prototype,Mo=Oo.prototype,Uo=(Uo=p.window)&&Uo.document,zo=Bo.prototype.toString,Fo=Vn("length"),qo=Mo.hasOwnProperty,Ko=0,Jo=Mo.toString,Yo=p._,Go=Do("^"+io(Jo).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Qo=Sa(Qo=p.ArrayBuffer)&&Qo,Xo=Sa(Xo=Qo&&new Qo(0).slice)&&Xo,Zo=Lo.ceil,el=p.clearTimeout,tl=Lo.floor,nl=Sa(nl=Oo.getPrototypeOf)&&nl,il=Ho.push,rl=Mo.propertyIsEnumerable,al=Sa(al=p.Set)&&al,ol=p.setTimeout,ll=Ho.splice,sl=Sa(sl=p.Uint8Array)&&sl,ul=(Ho.unshift,Sa(ul=p.WeakMap)&&ul),cl=function(){try{var e=Sa(e=p.Float64Array)&&e,t=new e(new Qo(10),0,1)&&e}catch(n){}return t}(),dl=Sa(dl=Eo.isArray)&&dl,fl=Sa(fl=Oo.create)&&fl,vl=p.isFinite,pl=Sa(pl=Oo.keys)&&pl,hl=Lo.max,ml=Lo.min,gl=Sa(gl=Ao.now)&&gl,yl=Sa(yl=Ro.isFinite)&&yl,bl=p.parseInt,_l=Lo.random,wl=Ro.NEGATIVE_INFINITY,Cl=Ro.POSITIVE_INFINITY,Sl=Lo.pow(2,32)-1,xl=Sl-1,Wl=Sl>>>1,kl=cl?cl.BYTES_PER_ELEMENT:0,Tl=Lo.pow(2,53)-1,Il=ul&&new ul,$l=K.support={};!function(){$l.funcDecomp=!Sa(p.WinRTError)&&$t.test(_),$l.funcNames="string"==typeof Bo.name;try{$l.dom=11===Uo.createDocumentFragment().nodeType}catch(e){$l.dom=!1}try{$l.nonEnumArgs=!rl.call(arguments,1)}catch(e){$l.nonEnumArgs=!0}}(0,0),K.templateSettings={escape:gt,evaluate:yt,interpolate:bt,variable:"",imports:{_:K}};var Nl=function(){function e(){}return function(t){if(_a(t)){e.prototype=t;var n=new e;e.prototype=null}return n||p.Object()}}(),El=Il?function(e,t){return Il.set(e,t),e}:wo;Xo||(Qn=Qo&&sl?function(e){var t=e.byteLength,n=cl?tl(t/kl):0,i=n*kl,r=new Qo(t);if(n){var a=new cl(r,0,n);a.set(new cl(e,0,n))}return t!=i&&(a=new sl(r,i),a.set(new sl(e,i))),r}:_o(null));var Al=fl&&al?function(e){return new Kt(e)}:_o(null),Pl=Il?function(e){return Il.get(e)}:Wo,Bl=function(){var e=0,t=0;return function(n,i){var r=Hl(),a=L-(r-t);if(t=r,a>0){if(++e>=B)return n}else e=0;return El(n,i)}}(),Ll=ei(function(e,t,n){qo.call(e,n)?++e[n]:e[n]=1}),Rl=ei(function(e,t,n){qo.call(e,n)?e[n].push(t):e[n]=[t]}),Ol=ei(function(e,t,n){e[n]=t}),Dl=ai(rn),Vl=ai(an,!0),jl=ei(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),Hl=gl||function(){return(new Ao).getTime()},Ml=dl||function(e){return v(e)&&Si(e.length)&&Jo.call(e)==M||!1};$l.dom||(ha=function(e){return e&&1===e.nodeType&&v(e)&&!zl(e)||!1});var Ul=yl||function(e){return"number"==typeof e&&vl(e)};(ba(/x/)||sl&&!ba(sl))&&(ba=function(e){return Jo.call(e)==q});var zl=nl?function(e){if(!e||Jo.call(e)!=Y)return!1;var t=e.valueOf,n=Sa(t)&&(n=nl(t))&&nl(n);return n?e==n||nl(e)==n:$i(e)}:$i,Fl=ti(dn),ql=pl?function(e){if(e)var t=e.constructor,n=e.length;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&n&&Si(n)?Ni(e):_a(e)?pl(e):[]}:Ni,Kl=ti(On),Jl=ii(function(e,t,n){return t=t.toLowerCase(),n?e+t.charAt(0).toUpperCase()+t.slice(1):t}),Yl=ii(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()});8!=bl(At+"08")&&(lo=function(e,t,n){return(n?Ci(e,t,n):null==t)?t=0:t&&(t=+t),e=fo(e),bl(e,t||(St.test(e)?16:10))});var Gl=ii(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});return Q.prototype=K.prototype,Ht.prototype["delete"]=Mt,Ht.prototype.get=zt,Ht.prototype.has=Ft,Ht.prototype.set=qt,Kt.prototype.push=Gt,na.Cache=Ht,K.after=Ur,K.ary=zr,K.assign=Fl,K.at=wr,K.before=Fr,K.bind=qr,K.bindAll=Kr,K.bindKey=Jr,K.callback=bo,K.chain=pr,K.chunk=Pi,K.compact=Bi,K.constant=_o,K.countBy=Ll,K.create=Aa,K.curry=Yr,K.curryRight=Gr,K.debounce=Qr,K.defaults=Pa,K.defer=Xr,K.delay=Zr,K.difference=Li,K.drop=Ri,K.dropRight=Oi,K.dropRightWhile=Di,K.dropWhile=Vi,K.filter=xr,K.flatten=Ui,K.flattenDeep=zi,K.flow=ea,K.flowRight=ta,K.forEach=Ir,K.forEachRight=$r,K.forIn=Ra,K.forInRight=Oa,K.forOwn=Da,K.forOwnRight=Va,K.functions=ja,K.groupBy=Rl,K.indexBy=Ol,K.initial=qi,K.intersection=Ki,K.invert=Ma,K.invoke=Nr,K.keys=ql,K.keysIn=Ua,K.map=Er,K.mapValues=za,K.matches=Co,K.memoize=na,K.merge=Kl,K.mixin=So,K.negate=ia,K.omit=Fa,K.once=ra,K.pairs=qa,K.partial=aa,K.partialRight=oa,K.partition=jl,K.pick=Ka,K.pluck=Ar,K.property=ko,K.propertyOf=To,K.pull=Gi,K.pullAt=Qi,K.range=Io,K.rearg=la,K.reject=Lr,K.remove=Xi,K.rest=Zi,K.shuffle=Or,K.slice=er,K.sortBy=jr,K.sortByAll=Hr,K.take=ir,K.takeRight=rr,K.takeRightWhile=ar,K.takeWhile=or,K.tap=hr,K.throttle=sa,K.thru=mr,K.times=$o,K.toArray=Na,K.toPlainObject=Ea,K.transform=Ya,K.union=lr,K.uniq=sr,K.unzip=ur,K.values=Ga,K.valuesIn=Qa,K.where=Mr,K.without=cr,K.wrap=ua,K.xor=dr,K.zip=fr,K.zipObject=vr,K.backflow=ta,K.collect=Er,K.compose=ta,K.each=Ir,K.eachRight=$r,K.extend=Fl,K.iteratee=bo,K.methods=ja,K.object=vr,K.select=xr,K.tail=Zi,K.unique=sr,So(K,K),K.attempt=yo,K.camelCase=Jl,K.capitalize=Za,K.clone=ca,K.cloneDeep=da,K.deburr=eo,K.endsWith=to,K.escape=no,K.escapeRegExp=io,K.every=Sr,K.find=Wr,K.findIndex=ji,K.findKey=Ba,K.findLast=kr,K.findLastIndex=Hi,K.findLastKey=La,K.findWhere=Tr,K.first=Mi,K.has=Ha,K.identity=wo,K.includes=Cr,K.indexOf=Fi,K.isArguments=fa,K.isArray=Ml,K.isBoolean=va,K.isDate=pa,K.isElement=ha,K.isEmpty=ma,K.isEqual=ga,K.isError=ya,K.isFinite=Ul,K.isFunction=ba,K.isMatch=wa,K.isNaN=Ca,K.isNative=Sa,K.isNull=xa,K.isNumber=Wa,K.isObject=_a,K.isPlainObject=zl,K.isRegExp=ka,K.isString=Ta,K.isTypedArray=Ia,K.isUndefined=$a,K.kebabCase=Yl,K.last=Ji,K.lastIndexOf=Yi,K.max=Dl,K.min=Vl,K.noConflict=xo,K.noop=Wo,K.now=Hl,K.pad=ro,K.padLeft=ao,K.padRight=oo,K.parseInt=lo,K.random=Xa,K.reduce=Pr,K.reduceRight=Br,K.repeat=so,K.result=Ja,K.runInContext=_,K.size=Dr,K.snakeCase=Gl,K.some=Vr,K.sortedIndex=tr,K.sortedLastIndex=nr,K.startsWith=uo,K.template=co,K.trim=fo,K.trimLeft=vo,K.trimRight=po,K.trunc=ho,K.unescape=mo,K.uniqueId=No,K.words=go,K.all=Sr,K.any=Vr,K.contains=Cr,K.detect=Wr,K.foldl=Pr,K.foldr=Br,K.head=Mi,K.include=Cr,K.inject=Pr,So(K,function(){var e={};return In(K,function(t,n){K.prototype[n]||(e[n]=t)}),e}(),!1),K.sample=Rr,K.prototype.sample=function(e){return this.__chain__||null!=e?this.thru(function(t){return Rr(t,e)}):Rr(this.value())},K.VERSION=C,Xt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){K[e].placeholder=K}),Xt(["filter","map","takeWhile"],function(e,t){var n=t==R;Z.prototype[e]=function(e,i){var r=this.clone(),a=r.filtered,o=r.iteratees||(r.iteratees=[]);return r.filtered=a||n||t==D&&r.dir<0,o.push({iteratee:pi(e,i,3),type:t}),r}}),Xt(["drop","take"],function(e,t){var n=e+"Count",i=e+"While";Z.prototype[e]=function(i){i=null==i?1:hl(+i||0,0);var r=this.clone();if(r.filtered){var a=r[n];r[n]=t?ml(a,i):a+i}else{var o=r.views||(r.views=[]);o.push({size:i,type:e+(r.dir<0?"Right":"")})}return r},Z.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()},Z.prototype[e+"RightWhile"]=function(e,t){return this.reverse()[i](e,t).reverse()}}),Xt(["first","last"],function(e,t){var n="take"+(t?"Right":"");Z.prototype[e]=function(){return this[n](1).value()[0]}}),Xt(["initial","rest"],function(e,t){var n="drop"+(t?"":"Right");Z.prototype[e]=function(){return this[n](1)}}),Xt(["pluck","where"],function(e,t){var n=t?"filter":"map",i=t?Co:ko;Z.prototype[e]=function(e){return this[n](i(e))}}),Z.prototype.dropWhile=function(e,t){var n,i,r=this.dir<0;return e=pi(e,t,3),this.filter(function(t,a,o){return n=n&&(r?i>a:a>i),i=a,n||(n=!e(t,a,o))})},Z.prototype.reject=function(e,t){return e=pi(e,t,3),this.filter(function(t,n,i){return!e(t,n,i)})},Z.prototype.slice=function(e,t){e=null==e?0:+e||0;var n=0>e?this.takeRight(-e):this.drop(e);return"undefined"!=typeof t&&(t=+t||0,n=0>t?n.dropRight(-t):n.take(t-e)),n},In(Z.prototype,function(e,t){var n=/^(?:first|last)$/.test(t);K.prototype[t]=function(){var i=this.__wrapped__,r=arguments,a=this.__chain__,o=!!this.__actions__.length,l=i instanceof Z,s=l&&!o;if(n&&!a)return s?e.call(i):K[t](this.value());var u=function(e){var n=[e];return il.apply(n,r),K[t].apply(K,n)};if(l||Ml(i)){var c=s?i:new Z(this),d=e.apply(c,r);if(!n&&(o||d.actions)){var f=d.actions||(d.actions=[]);f.push({func:mr,args:[u],thisArg:K})}return new Q(d,a)}return this.thru(u)}}),Xt(["concat","join","pop","push","shift","sort","splice","unshift"],function(e){var t=Ho[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:join|pop|shift)$/.test(e);K.prototype[e]=function(){var e=arguments;return i&&!this.__chain__?t.apply(this.value(),e):this[n](function(n){return t.apply(n,e)})}}),Z.prototype.clone=Dt,Z.prototype.reverse=Vt,Z.prototype.value=jt,K.prototype.chain=gr,K.prototype.reverse=yr,K.prototype.toString=br,K.prototype.toJSON=K.prototype.valueOf=K.prototype.value=_r,K.prototype.collect=K.prototype.map,K.prototype.head=K.prototype.first,K.prototype.select=K.prototype.filter,K.prototype.tail=K.prototype.rest,K}var w,C="3.0.0",S=1,x=2,W=4,k=8,T=16,I=32,$=64,N=128,E=256,A=30,P="...",B=150,L=16,R=0,O=1,D=2,V="Expected a function",j="__lodash_placeholder__",H="[object Arguments]",M="[object Array]",U="[object Boolean]",z="[object Date]",F="[object Error]",q="[object Function]",K="[object Map]",J="[object Number]",Y="[object Object]",G="[object RegExp]",Q="[object Set]",X="[object String]",Z="[object WeakMap]",et="[object ArrayBuffer]",tt="[object Float32Array]",nt="[object Float64Array]",it="[object Int8Array]",rt="[object Int16Array]",at="[object Int32Array]",ot="[object Uint8Array]",lt="[object Uint8ClampedArray]",st="[object Uint16Array]",ut="[object Uint32Array]",ct=/\b__p \+= '';/g,dt=/\b(__p \+=) '' \+/g,ft=/(__e\(.*?\)|\b__t\)) \+\n'';/g,vt=/&(?:amp|lt|gt|quot|#39|#96);/g,pt=/[&<>"'`]/g,ht=RegExp(vt.source),mt=RegExp(pt.source),gt=/<%-([\s\S]+?)%>/g,yt=/<%([\s\S]+?)%>/g,bt=/<%=([\s\S]+?)%>/g,_t=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,wt=/\w*$/,Ct=/^\s*function[ \n\r\t]+\w/,St=/^0[xX]/,xt=/^\[object .+?Constructor\]$/,Wt=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,kt=/($^)/,Tt=/[.*+?^${}()|[\]\/\\]/g,It=RegExp(Tt.source),$t=/\bthis\b/,Nt=/['\n\r\u2028\u2029\\]/g,Et=function(){var e="[A-Z\\xc0-\\xd6\\xd8-\\xde]",t="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(e+"{2,}(?="+e+t+")|"+e+"?"+t+"|"+e+"+|[0-9]+","g")}(),At=" 	\f\n\r\u2028\u2029",Pt=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","document","isFinite","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","window","WinRTError"],Bt=-1,Lt={};Lt[tt]=Lt[nt]=Lt[it]=Lt[rt]=Lt[at]=Lt[ot]=Lt[lt]=Lt[st]=Lt[ut]=!0,Lt[H]=Lt[M]=Lt[et]=Lt[U]=Lt[z]=Lt[F]=Lt[q]=Lt[K]=Lt[J]=Lt[Y]=Lt[G]=Lt[Q]=Lt[X]=Lt[Z]=!1;var Rt={};Rt[H]=Rt[M]=Rt[et]=Rt[U]=Rt[z]=Rt[tt]=Rt[nt]=Rt[it]=Rt[rt]=Rt[at]=Rt[J]=Rt[Y]=Rt[G]=Rt[X]=Rt[ot]=Rt[lt]=Rt[st]=Rt[ut]=!0,Rt[F]=Rt[q]=Rt[K]=Rt[Q]=Rt[Z]=!1;var Ot={leading:!1,maxWait:0,trailing:!1},Dt={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss"},Vt={"&":"&","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},jt={"&":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Ht={"function":!0,object:!0},Mt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ut=Ht[typeof window]&&window!==(this&&this.window)?window:this,zt=Ht[typeof exports]&&exports&&!exports.nodeType&&exports,Ft=Ht[typeof module]&&module&&!module.nodeType&&module,qt=zt&&Ft&&"object"==typeof global&&global;!qt||qt.global!==qt&&qt.window!==qt&&qt.self!==qt||(Ut=qt);var Kt=Ft&&Ft.exports===zt&&zt,Jt=_();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Ut._=Jt,define(function(){return Jt})):zt&&Ft?Kt?(Ft.exports=Jt)._=Jt:zt._=Jt:Ut._=Jt}.call(this);
